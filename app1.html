<!doctype html>
<html class="no-js" lang="zh-CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta content="Artifex" name="author" />
<meta content="PyMuPDF 是一个高性能 Python 库，用于 PDF（及其他）文档的数据提取、分析、转换和操作。" name="description" />
<meta content="PDF Text Extraction, PDF Image Extraction, PDF Conversion, PDF Tables, PDF Splitting, PDF Creation, Pyodide, PyScript" name="keywords" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JZTN4VTL9M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JZTN4VTL9M');
    </script>
    <link rel="author" title="关于此文档" href="about.html" /><link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" /><link rel="next" title="附录 2：嵌入式文件的注意事项" href="app2.html" /><link rel="prev" title="颜色数据库" href="colors.html" />

    <link rel="shortcut icon" href="_static/PyMuPDF.ico"/><!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>附录 1：文本提取详细信息 - PyMuPDF 1.25.4 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">PyMuPDF 1.25.4 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/sidebar-logo-dark.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/sidebar-logo-light.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">PyMuPDF 1.25.4 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">关于/About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">功能比较</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html#about-performance">性能</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html#about-license">许可和版权</a></li>
<li class="toctree-l1"><a class="reference internal" href="pymupdf4llm/index.html">PyMuPDF4LLM</a></li>
<li class="toctree-l1"><a class="reference internal" href="pymupdf-pro.html">PyMuPDF Pro</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">用户指南/User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="the-basics.html">基础用法</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="rag.html">PyMuPDF、LLM 和 RAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">资源</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">教程/How to Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="how-to-open-a-file.html">打开文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-text.html">文本</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-images.html">图片</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-annotations.html">注释</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-drawing-and-graphics.html">绘图和图形</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-stories.html">故事</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-journalling.html">日记</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-multiprocessing.html">多进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-ocr.html">OCR - 光学字符识别</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-optional-content.html">可选内容支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-low-level-interfaces.html">低级接口</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-common-issues-and-their-solutions.html">常见问题及其解决方案</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API参考/API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="module.html">命令行界面</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="classes.html">类</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="annot.html">Annot</a></li>
<li class="toctree-l2"><a class="reference internal" href="archive-class.html">Archive</a></li>
<li class="toctree-l2"><a class="reference internal" href="colorspace.html">Colorspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="displaylist.html">DisplayList</a></li>
<li class="toctree-l2"><a class="reference internal" href="document.html">Document</a></li>
<li class="toctree-l2"><a class="reference internal" href="document-writer-class.html">DocumentWriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="font.html">Font</a></li>
<li class="toctree-l2"><a class="reference internal" href="identity.html">Identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="irect.html">IRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="link.html">Link</a></li>
<li class="toctree-l2"><a class="reference internal" href="linkdest.html">linkDest</a></li>
<li class="toctree-l2"><a class="reference internal" href="matrix.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="outline.html">Outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html">Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="pixmap.html">Pixmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="point.html">Point</a></li>
<li class="toctree-l2"><a class="reference internal" href="quad.html">Quad</a></li>
<li class="toctree-l2"><a class="reference internal" href="rect.html">Rect</a></li>
<li class="toctree-l2"><a class="reference internal" href="shape.html">Shape</a></li>
<li class="toctree-l2"><a class="reference internal" href="story-class.html">Story</a></li>
<li class="toctree-l2"><a class="reference internal" href="textpage.html">TextPage</a></li>
<li class="toctree-l2"><a class="reference internal" href="textwriter.html">TextWriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="widget.html">Widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="xml-class.html">Xml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algebra.html">几何对象的运算符代数</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lowlevel.html">低级函数和类</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="functions.html">函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="device.html">设备</a></li>
<li class="toctree-l2"><a class="reference internal" href="coop_low.html">协同工作: DisplayList 和 TextPage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="vars.html">常量和枚举</a></li>
<li class="toctree-l1"><a class="reference internal" href="colors.html">颜色数据库</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">其他/Other</span></p>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">附录 1：文本提取详细信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="app2.html">附录 2：嵌入式文件的注意事项</a></li>
<li class="toctree-l1"><a class="reference internal" href="app3.html">附录 3：各类技术信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="app4.html">附录 4：性能比较方法</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="znames.html">已废弃名称</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div style="display:flex;justify-content:space-between;align-items: center;">
    <form class="sidebar-search-container top" method="get" action="search.html" role="search" style="width:75%">
      <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
      <input type="hidden" name="check_keywords" value="yes">
      <input type="hidden" name="area" value="default">
    </form>
</div>

<div style="display:flex;justify-content:space-between;align-items:center;margin-top:20px;">
    <div class="discordLink" style="display:flex;align-items:center;margin-top: -5px;">
        <a href="https://discord.gg/TSpYGBW4eq" id="findOnDiscord" target=_blank>Find <b>#pymupdf</b> on <b>Discord</b></a>
        <a href="https://discord.gg/TSpYGBW4eq" target=_blank>
            <div style="width:30px;height:30px;margin-left:5px;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 127.14 96.36">
                    <defs>
                        <style>.discordLogoFill{fill:#5865f2;}</style>
                    </defs>
                    <g id="Discord_Logo" data-name="Discord Logo">
                        <path class="discordLogoFill" d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
                    </g>
                </svg>
            </div>
        </a>
    </div>

</div><section id="appendix1">
<span id="id1"></span><h1>附录 1：文本提取详细信息<a class="headerlink" href="#appendix1" title="此标题的永久链接">#</a></h1>
<p>Appendix 1: Details on Text Extraction</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<p>本章介绍了 PyMuPDF 文本提取方法的背景。</p>
<p>感兴趣的信息是</p>
<ul class="simple">
<li><p>它们提供什么？</p></li>
<li><p>它们意味着什么 (处理时间/数据大小) ？</p></li>
</ul>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<p>This chapter provides background on the text extraction methods of PyMuPDF.</p>
<p>Information of interest are</p>
<ul class="simple">
<li><p>what do they provide?</p></li>
<li><p>what do they imply (processing time / data sizes)?</p></li>
</ul>
</div>
</div>
<section id="textpage">
<h2>TextPage 的一般结构<a class="headerlink" href="#textpage" title="此标题的永久链接">#</a></h2>
<p>General structure of a TextPage</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#textpage"><span class="std std-ref">TextPage</span></a> 是 (Py-) MuPDF 的一个类。通常，在使用 <a class="reference internal" href="page.html#page"><span class="std std-ref">Page</span></a> 的文本提取方法时，它会在幕后被创建并销毁。但它也可以直接使用，作为一个持久对象。尽管名称中包含“Text”，但文本页面中也可以包含图像:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">page</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">text</span> <span class="n">block</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">line</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">char</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">image</span> <span class="n">block</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">img</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>一个 <strong>文本页面(TextPage)</strong> 由多个块 (block) 组成 (大致对应于段落) 。</p>
<p>一个 <strong>块(block)</strong> 要么由文本行和字符组成，要么包含一幅图像。</p>
<p>一 <strong>行(line)</strong> 由多个文本片段 (span) 组成。</p>
<p>一个 <strong>文本片段(span)</strong> 由具有相同字体属性 (名称、大小、标志、颜色) 的相邻字符组成。</p>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#textpage"><span class="std std-ref">TextPage</span></a> is one of (Py-) MuPDF’s classes. It is normally created (and destroyed again) behind the curtain, when <a class="reference internal" href="page.html#page"><span class="std std-ref">Page</span></a> text extraction methods are used, but it is also available directly and can be used as a persistent object. Other than its name suggests, images may optionally also be part of a text page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">page</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">text</span> <span class="n">block</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">line</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">span</span><span class="o">&gt;</span>
                <span class="o">&lt;</span><span class="n">char</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="n">image</span> <span class="n">block</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">img</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>A <strong>text page</strong> consists of blocks (= roughly paragraphs).</p>
<p>A <strong>block</strong> consists of either lines and their characters, or an image.</p>
<p>A <strong>line</strong> consists of spans.</p>
<p>A <strong>span</strong> consists of adjacent characters with identical font properties: name, size, flags and color.</p>
</div>
</div>
</section>
<section id="id2">
<h2>纯文本<a class="headerlink" href="#id2" title="此标题的永久链接">#</a></h2>
<p>Plain Text</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<p>函数 <a class="reference internal" href="textpage.html#TextPage.extractText" title="TextPage.extractText"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractText()</span></code></a> (或 <code class="xref any docutils literal notranslate"><span class="pre">Page.get_text(&quot;text&quot;)</span></code>) 提取页面的 <strong>纯文本</strong>，并按照文档创建者指定的 <strong>原始顺序</strong> 返回。</p>
<p>示例输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
<span class="go">Some text on first page.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>输出的文本顺序可能与常规的“自然”阅读顺序不同。然而，可以通过执行 <code class="xref any docutils literal notranslate"><span class="pre">page.get_text(&quot;text&quot;,</span> <span class="pre">sort=True)</span></code> 来请求按照 <strong>从左上到右下</strong> 的顺序重新排序文本。</p>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<p>Function <a class="reference internal" href="textpage.html#TextPage.extractText" title="TextPage.extractText"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractText()</span></code></a> (or <em>Page.get_text(“text”)</em>) extracts a page’s plain <strong>text in original order</strong> as specified by the creator of the document.</p>
<p>An example output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
<span class="go">Some text on first page.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The output may not equal an accustomed “natural” reading order. However, you can request a reordering following the scheme “top-left to bottom-right” by executing <code class="xref any docutils literal notranslate"><span class="pre">page.get_text(&quot;text&quot;,</span> <span class="pre">sort=True)</span></code>.</p>
</div>
</div>
</div>
</section>
<section id="id3">
<h2>块<a class="headerlink" href="#id3" title="此标题的永久链接">#</a></h2>
<p>BLOCKS</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p>函数 <a class="reference internal" href="textpage.html#TextPage.extractBLOCKS" title="TextPage.extractBLOCKS"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractBLOCKS()</span></code></a> (或 <code class="xref any docutils literal notranslate"><span class="pre">Page.get_text(&quot;blocks&quot;)</span></code>) 提取页面的文本块，并返回如下格式的列表:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s2">&quot;block 内的文本行&quot;</span><span class="p">,</span> <span class="n">block_no</span><span class="p">,</span> <span class="n">block_type</span><span class="p">)</span>
</pre></div>
</div>
<p>其中：</p>
<ul class="simple">
<li><p>前四个元素是该文本块的 <strong>边界框(bbox)</strong> 的浮点坐标值。</p></li>
<li><p>文本块中的行通过换行符 (<a class="reference internal" href="colorspace.html#Colorspace.n" title="Colorspace.n"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">n</span></code></a>) 进行拼接。</p></li>
</ul>
<p>该方法运行速度极快，并且 <strong>默认情况下还会提取图像的元数据信息</strong>：每个图像都会作为一个文本块出现，其中包含一行文本，记录该图像的元数据信息。<strong>图像本身不会被显示</strong>。</p>
<p>与前面提到的简单文本提取类似，<code class="xref any docutils literal notranslate"><span class="pre">sort</span></code> 参数同样适用，可用于调整文本块的阅读顺序。</p>
<p>示例输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;blocks&quot;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="go">[(50.0, 88.17500305175781, 166.1709747314453, 103.28900146484375,</span>
<span class="go">&#39;Some text on first page.&#39;, 0, 0)]</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>Function <a class="reference internal" href="textpage.html#TextPage.extractBLOCKS" title="TextPage.extractBLOCKS"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractBLOCKS()</span></code></a> (or <em>Page.get_text(“blocks”)</em>) extracts a page’s text blocks as a list of items like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s2">&quot;lines in block&quot;</span><span class="p">,</span> <span class="n">block_no</span><span class="p">,</span> <span class="n">block_type</span><span class="p">)</span>
</pre></div>
</div>
<p>Where the first 4 items are the float coordinates of the block’s bbox. The lines within each block are concatenated by a new-line character.</p>
<p>This is a high-speed method, which by default also extracts image meta information: Each image appears as a block with one text line, which contains meta information. The image itself is not shown.</p>
<p>As with simple text output above, the <code class="xref any docutils literal notranslate"><span class="pre">sort</span></code> argument can be used as well to obtain a reading order.</p>
<p>Example output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;blocks&quot;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="go">[(50.0, 88.17500305175781, 166.1709747314453, 103.28900146484375,</span>
<span class="go">&#39;Some text on first page.&#39;, 0, 0)]</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id4">
<h2>单词<a class="headerlink" href="#id4" title="此标题的永久链接">#</a></h2>
<p>WORDS</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--4-input--1" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--1">中文</label><div class="tab-content docutils container">
<p>函数 <a class="reference internal" href="textpage.html#TextPage.extractWORDS" title="TextPage.extractWORDS"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractWORDS()</span></code></a> (或 <code class="xref any docutils literal notranslate"><span class="pre">Page.get_text(&quot;words&quot;)</span></code>) 提取页面中的 <strong>单词</strong>，并返回如下格式的列表:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s2">&quot;word&quot;</span><span class="p">,</span> <span class="n">block_no</span><span class="p">,</span> <span class="n">line_no</span><span class="p">,</span> <span class="n">word_no</span><span class="p">)</span>
</pre></div>
</div>
<p>其中：</p>
<ul class="simple">
<li><p>前四个元素是该单词的 <strong>边界框(bbox)</strong> 的浮点坐标值。</p></li>
<li><p>最后三个整数表示该单词所在的 <strong>文本块编号、行号和单词编号</strong>。</p></li>
</ul>
<p>该方法运行速度极快。与前述方法类似， <code class="xref any docutils literal notranslate"><span class="pre">sort=True</span></code> 参数可用于重新排序单词，以确保按照 <strong>阅读顺序</strong> 提取内容。</p>
<p>示例输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="go">        print(word)</span>
<span class="go">(50.0, 88.17500305175781, 78.73200225830078, 103.28900146484375,</span>
<span class="go">&#39;Some&#39;, 0, 0, 0)</span>
<span class="go">(81.79000091552734, 88.17500305175781, 99.5219955444336, 103.28900146484375,</span>
<span class="go">&#39;text&#39;, 0, 0, 1)</span>
<span class="go">(102.57999420166016, 88.17500305175781, 114.8119888305664, 103.28900146484375,</span>
<span class="go">&#39;on&#39;, 0, 0, 2)</span>
<span class="go">(117.86998748779297, 88.17500305175781, 135.5909881591797, 103.28900146484375,</span>
<span class="go">&#39;first&#39;, 0, 0, 3)</span>
<span class="go">(138.64898681640625, 88.17500305175781, 166.1709747314453, 103.28900146484375,</span>
<span class="go">&#39;page.&#39;, 0, 0, 4)</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--4-input--2" name="tab-set--4" type="radio"><label class="tab-label" for="tab-set--4-input--2">英文</label><div class="tab-content docutils container">
<p>Function <a class="reference internal" href="textpage.html#TextPage.extractWORDS" title="TextPage.extractWORDS"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractWORDS()</span></code></a> (or <em>Page.get_text(“words”)</em>) extracts a page’s text <strong>words</strong> as a list of items like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">x0</span><span class="p">,</span> <span class="n">y0</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="s2">&quot;word&quot;</span><span class="p">,</span> <span class="n">block_no</span><span class="p">,</span> <span class="n">line_no</span><span class="p">,</span> <span class="n">word_no</span><span class="p">)</span>
</pre></div>
</div>
<p>Where the first 4 items are the float coordinates of the words’s bbox. The last three integers provide some more information on the word’s whereabouts.</p>
<p>This is a high-speed method. As with the previous methods, argument <code class="xref any docutils literal notranslate"><span class="pre">sort=True</span></code> will reorder the words.</p>
<p>Example output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;words&quot;</span><span class="p">,</span> <span class="n">sort</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="go">        print(word)</span>
<span class="go">(50.0, 88.17500305175781, 78.73200225830078, 103.28900146484375,</span>
<span class="go">&#39;Some&#39;, 0, 0, 0)</span>
<span class="go">(81.79000091552734, 88.17500305175781, 99.5219955444336, 103.28900146484375,</span>
<span class="go">&#39;text&#39;, 0, 0, 1)</span>
<span class="go">(102.57999420166016, 88.17500305175781, 114.8119888305664, 103.28900146484375,</span>
<span class="go">&#39;on&#39;, 0, 0, 2)</span>
<span class="go">(117.86998748779297, 88.17500305175781, 135.5909881591797, 103.28900146484375,</span>
<span class="go">&#39;first&#39;, 0, 0, 3)</span>
<span class="go">(138.64898681640625, 88.17500305175781, 166.1709747314453, 103.28900146484375,</span>
<span class="go">&#39;page.&#39;, 0, 0, 4)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="html">
<h2>HTML<a class="headerlink" href="#html" title="此标题的永久链接">#</a></h2>
<p>HTML</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--5-input--1" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractHTML" title="TextPage.extractHTML"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractHTML()</span></code></a> (或 <code class="xref any docutils literal notranslate"><span class="pre">Page.get_text(&quot;html&quot;)</span></code>) 的输出完整反映了 <em>TextPage</em> 的结构 —— 类似于 <code class="xref any docutils literal notranslate"><span class="pre">DICT</span></code> / <code class="xref any docutils literal notranslate"><span class="pre">JSON</span></code> 格式的输出。
其中包括 <strong>图像、字体信息</strong> 以及 <strong>文本位置</strong>。如果将其包裹在 <strong>HTML 头部和尾部代码</strong> 之中，就可以直接在浏览器中显示。</p>
<p>例如，以下代码展示了 <code class="xref any docutils literal notranslate"><span class="pre">page.get_text(&quot;html&quot;)</span></code> 的输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
<span class="go">        print(line)</span>

<span class="go">&lt;div id=&quot;page0&quot; style=&quot;position:relative;width:300pt;height:350pt;</span>
<span class="go">background-color:white&quot;&gt;</span>
<span class="go">&lt;p style=&quot;position:absolute;white-space:pre;margin:0;padding:0;top:88pt;</span>
<span class="go">left:50pt&quot;&gt;&lt;span style=&quot;font-family:Helvetica,sans-serif;</span>
<span class="go">font-size:11pt&quot;&gt;Some text on first page.&lt;/span&gt;&lt;/p&gt;</span>
<span class="go">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--5-input--2" name="tab-set--5" type="radio"><label class="tab-label" for="tab-set--5-input--2">英文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractHTML" title="TextPage.extractHTML"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractHTML()</span></code></a> (or <em>Page.get_text(“html”)</em> output fully reflects the structure of the page’s <em>TextPage</em> – much like DICT / JSON below. This includes images, font information and text positions. If wrapped in HTML header and trailer code, it can readily be displayed by an internet browser. Our above example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
<span class="go">        print(line)</span>

<span class="go">&lt;div id=&quot;page0&quot; style=&quot;position:relative;width:300pt;height:350pt;</span>
<span class="go">background-color:white&quot;&gt;</span>
<span class="go">&lt;p style=&quot;position:absolute;white-space:pre;margin:0;padding:0;top:88pt;</span>
<span class="go">left:50pt&quot;&gt;&lt;span style=&quot;font-family:Helvetica,sans-serif;</span>
<span class="go">font-size:11pt&quot;&gt;Some text on first page.&lt;/span&gt;&lt;/p&gt;</span>
<span class="go">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="htmlquality">
<span id="id5"></span><h2>控制 HTML 输出的质量<a class="headerlink" href="#htmlquality" title="此标题的永久链接">#</a></h2>
<p>Controlling Quality of HTML Output</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--6-input--1" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--1">中文</label><div class="tab-content docutils container">
<p>虽然 MuPDF v1.12.0 版本在 <strong>HTML 输出</strong> 方面有了很大改进，但仍然存在一些 <strong>bug</strong>，主要涉及以下两个方面：</p>
<ol class="arabic simple">
<li><p><strong>字体支持问题</strong></p></li>
<li><p><strong>图片定位问题</strong></p></li>
</ol>
<p><strong>字体问题：</strong></p>
<ul class="simple">
<li><p>HTML 文本包含对原始文档字体的引用。如果浏览器无法识别这些字体 (大概率如此) ，它会用其他字体替代，导致排版异常。</p></li>
<li><p>不同的浏览器对此的处理方式不同。例如，在 <strong>Windows 系统</strong> 上，<strong>MS Edge</strong> 的显示效果较好，而 <strong>Firefox</strong> 可能会很混乱。</p></li>
</ul>
<p><strong>图片定位问题：</strong></p>
<ul class="simple">
<li><p>对于结构复杂的 PDF，图片可能 <strong>未正确定位或缩放</strong>。</p></li>
<li><p>这通常发生在 <strong>旋转页面</strong> 以及 <strong>不同 bbox 定义不一致</strong>  (如 <code class="xref any docutils literal notranslate"><span class="pre">MediaBox</span> <span class="pre">!=</span> <span class="pre">CropBox</span></code>) 的情况下。</p></li>
<li><p>目前尚未找到有效的解决方案，<strong>已经向 MuPDF 提交了 bug 反馈</strong>。</p></li>
</ul>
<p>—</p>
<p><strong>解决方案：</strong></p>
<p>对于 <strong>字体问题</strong>，可以使用一个简单的 Python 脚本来扫描 HTML 文件，并将 <strong>未知字体</strong> 替换为标准的 <code class="xref any docutils literal notranslate"><span class="pre">Base-14</span></code> 字体：
* <strong>衬线字体(serif)</strong>  → <strong>“Times”</strong>
* <strong>非衬线字体(sans-serif)</strong>  → <strong>“Helvetica”</strong>
* <strong>等宽字体(monospace)</strong>  → <strong>“Courier”</strong></p>
<p>以下示例代码完成该操作:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">otext</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>                 <span class="c1"># 读取 HTML 文件</span>
<span class="n">pos1</span> <span class="o">=</span> <span class="mi">0</span>                                      <span class="c1"># 搜索起始位置</span>
<span class="n">font_serif</span> <span class="o">=</span> <span class="s2">&quot;font-family:Times&quot;</span>              <span class="c1"># 替换为 Times</span>
<span class="n">font_sans</span>  <span class="o">=</span> <span class="s2">&quot;font-family:Helvetica&quot;</span>          <span class="c1"># 替换为 Helvetica</span>
<span class="n">font_mono</span>  <span class="o">=</span> <span class="s2">&quot;font-family:Courier&quot;</span>            <span class="c1"># 替换为 Courier</span>
<span class="n">found_one</span>  <span class="o">=</span> <span class="kc">False</span>                            <span class="c1"># 标记是否进行了替换</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">pos0</span> <span class="o">=</span> <span class="n">otext</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;font-family:&quot;</span><span class="p">,</span> <span class="n">pos1</span><span class="p">)</span>   <span class="c1"># 查找字体定义</span>
    <span class="k">if</span> <span class="n">pos0</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>                              <span class="c1"># 未找到，退出循环</span>
        <span class="k">break</span>
    <span class="n">pos1</span> <span class="o">=</span> <span class="n">otext</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">pos0</span><span class="p">)</span>              <span class="c1"># 找到字体定义的结束位置</span>
    <span class="n">test</span> <span class="o">=</span> <span class="n">otext</span><span class="p">[</span><span class="n">pos0</span> <span class="p">:</span> <span class="n">pos1</span><span class="p">]</span>                 <span class="c1"># 获取完整的字体定义</span>
    <span class="n">testn</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>                                <span class="c1"># 新的字体定义</span>
    <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,serif&quot;</span><span class="p">):</span>               <span class="c1"># 如果是衬线字体</span>
        <span class="n">testn</span> <span class="o">=</span> <span class="n">font_serif</span>                    <span class="c1"># 替换为 Times</span>
    <span class="k">elif</span> <span class="n">test</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,sans-serif&quot;</span><span class="p">):</span>        <span class="c1"># 如果是非衬线字体</span>
        <span class="n">testn</span> <span class="o">=</span> <span class="n">font_sans</span>                     <span class="c1"># 替换为 Helvetica</span>
    <span class="k">elif</span> <span class="n">test</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,monospace&quot;</span><span class="p">):</span>         <span class="c1"># 如果是等宽字体</span>
        <span class="n">testn</span> <span class="o">=</span> <span class="n">font_mono</span>                     <span class="c1"># 替换为 Courier</span>

    <span class="k">if</span> <span class="n">testn</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>                           <span class="c1"># 发现可替换字体</span>
        <span class="n">otext</span> <span class="o">=</span> <span class="n">otext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">testn</span><span class="p">)</span>    <span class="c1"># 替换 HTML 内容</span>
        <span class="n">found_one</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">pos1</span> <span class="o">=</span> <span class="mi">0</span>                              <span class="c1"># 重新开始搜索</span>

<span class="k">if</span> <span class="n">found_one</span><span class="p">:</span>
    <span class="n">ofile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
    <span class="n">ofile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">otext</span><span class="p">)</span>                        <span class="c1"># 保存新的 HTML 文件</span>
    <span class="n">ofile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: could not find any font specs!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>这样，转换后的 HTML 文件可以在大多数浏览器中正确显示。</p>
</div>
<input class="tab-input" id="tab-set--6-input--2" name="tab-set--6" type="radio"><label class="tab-label" for="tab-set--6-input--2">英文</label><div class="tab-content docutils container">
<p>While HTML output has improved a lot in MuPDF v1.12.0, it is not yet bug-free: we have found problems in the areas <strong>font support</strong> and <strong>image positioning</strong>.</p>
<ul class="simple">
<li><p>HTML text contains references to the fonts used of the original document. If these are not known to the browser (a fat chance!), it will replace them with others; the results will probably look awkward. This issue varies greatly by browser – on my Windows machine, MS Edge worked just fine, whereas Firefox looked horrible.</p></li>
<li><p>For PDFs with a complex structure, images may not be positioned and / or sized correctly. This seems to be the case for rotated pages and pages, where the various possible page bbox variants do not coincide (e.g. <em>MediaBox != CropBox</em>). We do not know yet, how to address this – we filed a bug at MuPDF’s site.</p></li>
</ul>
<p>To address the font issue, you can use a simple utility script to scan through the HTML file and replace font references. Here is a little example that replaces all fonts with one of the <a class="reference internal" href="app3.html#base-14-fonts"><span class="std std-ref">PDF Base 14 字体</span></a>: serifed fonts will become “Times”, non-serifed “Helvetica” and monospaced will become “Courier”. Their respective variations for “bold”, “italic”, etc. are hopefully done correctly by your browser:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
<span class="n">filename</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">otext</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>                 <span class="c1"># original html text string</span>
<span class="n">pos1</span> <span class="o">=</span> <span class="mi">0</span>                                      <span class="c1"># search start poition</span>
<span class="n">font_serif</span> <span class="o">=</span> <span class="s2">&quot;font-family:Times&quot;</span>              <span class="c1"># enter ...</span>
<span class="n">font_sans</span>  <span class="o">=</span> <span class="s2">&quot;font-family:Helvetica&quot;</span>          <span class="c1"># ... your choices ...</span>
<span class="n">font_mono</span>  <span class="o">=</span> <span class="s2">&quot;font-family:Courier&quot;</span>            <span class="c1"># ... here</span>
<span class="n">found_one</span>  <span class="o">=</span> <span class="kc">False</span>                            <span class="c1"># true if search successful</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">pos0</span> <span class="o">=</span> <span class="n">otext</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;font-family:&quot;</span><span class="p">,</span> <span class="n">pos1</span><span class="p">)</span>   <span class="c1"># start of a font spec</span>
    <span class="k">if</span> <span class="n">pos0</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>                              <span class="c1"># none found - we are done</span>
        <span class="k">break</span>
    <span class="n">pos1</span> <span class="o">=</span> <span class="n">otext</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;;&quot;</span><span class="p">,</span> <span class="n">pos0</span><span class="p">)</span>              <span class="c1"># end of font spec</span>
    <span class="n">test</span> <span class="o">=</span> <span class="n">otext</span><span class="p">[</span><span class="n">pos0</span> <span class="p">:</span> <span class="n">pos1</span><span class="p">]</span>                 <span class="c1"># complete font spec string</span>
    <span class="n">testn</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>                                <span class="c1"># the new font spec string</span>
    <span class="k">if</span> <span class="n">test</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,serif&quot;</span><span class="p">):</span>               <span class="c1"># font with serifs?</span>
        <span class="n">testn</span> <span class="o">=</span> <span class="n">font_serif</span>                    <span class="c1"># use Times instead</span>
    <span class="k">elif</span> <span class="n">test</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,sans-serif&quot;</span><span class="p">):</span>        <span class="c1"># sans serifs font?</span>
        <span class="n">testn</span> <span class="o">=</span> <span class="n">font_sans</span>                     <span class="c1"># use Helvetica</span>
    <span class="k">elif</span> <span class="n">test</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;,monospace&quot;</span><span class="p">):</span>         <span class="c1"># monospaced font?</span>
        <span class="n">testn</span> <span class="o">=</span> <span class="n">font_mono</span>                     <span class="c1"># becomes Courier</span>

    <span class="k">if</span> <span class="n">testn</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>                           <span class="c1"># any of the above found?</span>
        <span class="n">otext</span> <span class="o">=</span> <span class="n">otext</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">testn</span><span class="p">)</span>    <span class="c1"># change the source</span>
        <span class="n">found_one</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">pos1</span> <span class="o">=</span> <span class="mi">0</span>                              <span class="c1"># start over</span>

<span class="k">if</span> <span class="n">found_one</span><span class="p">:</span>
    <span class="n">ofile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.html&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
    <span class="n">ofile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">otext</span><span class="p">)</span>
    <span class="n">ofile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: could not find any font specs!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="dict-json">
<h2>DICT (或 JSON)<a class="headerlink" href="#dict-json" title="此标题的永久链接">#</a></h2>
<p>DICT (or JSON)</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--7-input--1" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractDICT" title="TextPage.extractDICT"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractDICT()</span></code></a> (或 <em>Page.get_text(“dict”, sort=False)</em>) 方法的输出 <strong>完整反映</strong> 了 <em>TextPage</em> 的结构，并且 <strong>提供详细的图片内容和位置信息</strong> (<em>bbox</em>，以像素单位表示的边界框) 。</p>
<p>与 <strong>JSON 输出</strong> 的不同之处：
- 在 <strong>DICT 输出</strong> 中，图片以 <em>bytes</em> 格式存储。
- 在 <strong>JSON 输出</strong> 中，图片以 <strong>Base64 编码字符串</strong> 形式存储。</p>
<p>如果想要可视化 <strong>字典结构</strong>，请参考 <a class="reference internal" href="textpage.html#textpagedict"><span class="std std-ref">字典输出的结构</span></a>。</p>
<p>—</p>
<p>以下是一个 <strong>Page.get_text(“dict”)</strong> 提取的 <strong>字典结构</strong> 示例:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mf">300.0</span><span class="p">,</span>   <span class="c1"># 页面宽度</span>
    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mf">350.0</span><span class="p">,</span>  <span class="c1"># 页面高度</span>
    <span class="s2">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">[{</span>      <span class="c1"># 文字块列表</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1"># 0 代表文本块，1 代表图片块</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">166.171</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>  <span class="c1"># 文本块的边界框</span>
        <span class="s2">&quot;lines&quot;</span><span class="p">:</span> <span class="p">({</span>   <span class="c1"># 文本行列表</span>
            <span class="s2">&quot;wmode&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># 书写模式 (0 = 水平书写，1 = 垂直书写)</span>
            <span class="s2">&quot;dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>  <span class="c1"># 方向向量 (水平文本：1.0, 0.0)</span>
            <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">166.171</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>  <span class="c1"># 该行的边界框</span>
            <span class="s2">&quot;spans&quot;</span><span class="p">:</span> <span class="p">({</span>  <span class="c1"># 文本跨度列表 (即一段字体属性相同的文本)</span>
                <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mf">11.0</span><span class="p">,</span>  <span class="c1"># 字体大小</span>
                <span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># 字体样式 (0 = 正常，1 = 斜体，2 = 粗体，4 = 下划线)</span>
                <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span>  <span class="c1"># 字体名称</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># 颜色 (RGB 值)</span>
                <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>  <span class="c1"># 文字起始位置</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Some text on first page.&quot;</span><span class="p">,</span>  <span class="c1"># 具体文本内容</span>
                <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">166.171</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">)</span>  <span class="c1"># 文字的边界框</span>
            <span class="p">})</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>—</p>
<p><strong>说明：</strong></p>
<ul class="simple">
<li><p><code class="xref any docutils literal notranslate"><span class="pre">blocks</span></code>：包含多个 <strong>文本块</strong> (或者 <strong>图片块</strong>) 。</p></li>
<li><p><a class="reference internal" href="annot.html#Annot.type" title="Annot.type"><code class="xref any py py-attr docutils literal notranslate"><span class="pre">type</span></code></a>：区分块的类型：</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">0</span></code> 表示 <strong>文本块</strong> (text block) 。</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">1</span></code> 表示 <strong>图片块</strong> (image block) 。</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">lines</span></code>：每个 <strong>文本块</strong> 由多行 (<code class="xref any docutils literal notranslate"><span class="pre">lines</span></code>) 组成。</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">spans</span></code>：每行由多个 <strong>文本跨度(spans)</strong> 组成，每个跨度代表 <strong>相同字体属性</strong> 的一组字符。</p></li>
</ul>
<p>这种结构 <strong>不仅提供了文本内容</strong>，还能精确描述 <strong>文本的坐标、字体、颜色和大小</strong>，适用于 <strong>OCR 处理、文本再排版、PDF 数据分析等应用</strong>。</p>
</div>
<input class="tab-input" id="tab-set--7-input--2" name="tab-set--7" type="radio"><label class="tab-label" for="tab-set--7-input--2">英文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractDICT" title="TextPage.extractDICT"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractDICT()</span></code></a> (or <em>Page.get_text(“dict”, sort=False)</em>) output fully reflects the structure of a <em>TextPage</em> and provides image content and position detail (<em>bbox</em> – boundary boxes in pixel units) for every block, line and span. Images are stored as <em>bytes</em> for DICT output and base64 encoded strings for JSON output.</p>
<p>For a visualization of the dictionary structure have a look at <a class="reference internal" href="textpage.html#textpagedict"><span class="std std-ref">字典输出的结构</span></a>.</p>
<p>Here is how this looks like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mf">300.0</span><span class="p">,</span>
    <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mf">350.0</span><span class="p">,</span>
    <span class="s2">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">166.1709747314453</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
        <span class="s2">&quot;lines&quot;</span><span class="p">:</span> <span class="p">({</span>
            <span class="s2">&quot;wmode&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;dir&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">166.1709747314453</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
            <span class="s2">&quot;spans&quot;</span><span class="p">:</span> <span class="p">({</span>
                <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mf">11.0</span><span class="p">,</span>
                <span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Some text on first page.&quot;</span><span class="p">,</span>
                <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">166.1709747314453</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">)</span>
            <span class="p">})</span>
        <span class="p">}]</span>
    <span class="p">}]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="rawdict-rawjson">
<h2>RAWDICT (或 RAWJSON)<a class="headerlink" href="#rawdict-rawjson" title="此标题的永久链接">#</a></h2>
<p>RAWDICT (or RAWJSON)</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--8-input--1" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractRAWDICT" title="TextPage.extractRAWDICT"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractRAWDICT()</span></code></a> (或 <em>Page.get_text(“rawdict”, sort=False)</em>) 是 <strong>DICT 模式的超集</strong>，提供了 <strong>更细粒度的信息</strong>。</p>
<p>其结构与 <a class="reference internal" href="textpage.html#TextPage.extractDICT" title="TextPage.extractDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractDICT</span></code></a> 输出 <strong>几乎相同</strong>，但 <strong>将 “text” 字段 (字符串) 替换为 “chars” 列表</strong>。
列表中的每个元素是一个 <strong>字符字典</strong>，包含每个字符的 <strong>位置、边界框和具体字符内容</strong> 。</p>
<p>假设 <a class="reference internal" href="textpage.html#TextPage.extractDICT" title="TextPage.extractDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractDICT</span></code></a> 输出的部分如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;spans&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mf">11.0</span><span class="p">,</span>
    <span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Some text on first page.&quot;</span><span class="p">,</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">166.171</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">)</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>在 <a class="reference internal" href="textpage.html#TextPage.extractRAWDICT" title="TextPage.extractRAWDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractRAWDICT</span></code></a> 模式下，相应部分将变为:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;spans&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mf">11.0</span><span class="p">,</span>
    <span class="s2">&quot;flags&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;font&quot;</span><span class="p">:</span> <span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span>
    <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;chars&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">57.337</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;S&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">57.337</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">57.337</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">63.453</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;o&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">63.453</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">63.453</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">72.616</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;m&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">72.616</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">72.616</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">78.732</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;e&quot;</span>
    <span class="p">},</span> <span class="p">{</span>
        <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">78.732</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">78.732</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">81.790</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot; &quot;</span>
    <span class="p">},</span>
    <span class="o">&lt;...</span><span class="n">中间字符省略</span><span class="o">...&gt;</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">163.113</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">163.113</span><span class="p">,</span> <span class="mf">88.175</span><span class="p">,</span> <span class="mf">166.171</span><span class="p">,</span> <span class="mf">103.289</span><span class="p">),</span>
        <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span>
    <span class="p">}]</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>—</p>
<p><strong>说明：</strong></p>
<ul class="simple">
<li><p><code class="xref any docutils literal notranslate"><span class="pre">&quot;text&quot;</span></code> (完整文本) 字段被 <code class="xref any docutils literal notranslate"><span class="pre">&quot;chars&quot;</span></code> (字符列表) 替代。</p></li>
<li><p>每个字符的 <strong>边界框 (bbox)、起始坐标 (origin)、字符内容 (“c”)</strong> 都被单独存储。</p></li>
<li><p>适用于 <strong>需要精确字符级分析</strong> 的应用，例如：</p></li>
<li><p>OCR (光学字符识别) 后处理</p></li>
<li><p>字符级坐标对齐</p></li>
<li><p>精细文本分析</p></li>
<li><p>复杂的 PDF 文字排版重建</p></li>
</ul>
<p>与 <a class="reference internal" href="textpage.html#TextPage.extractDICT" title="TextPage.extractDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractDICT</span></code></a> 相比，<a class="reference internal" href="textpage.html#TextPage.extractRAWDICT" title="TextPage.extractRAWDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractRAWDICT</span></code></a> 提供了 <strong>更细粒度的信息</strong>，但 <strong>数据量更大，处理速度较慢</strong>，因此 <strong>适用于更精确的文本处理任务</strong>。</p>
</div>
<input class="tab-input" id="tab-set--8-input--2" name="tab-set--8" type="radio"><label class="tab-label" for="tab-set--8-input--2">英文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractRAWDICT" title="TextPage.extractRAWDICT"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractRAWDICT()</span></code></a> (or <em>Page.get_text(“rawdict”, sort=False)</em>) is an <strong>information superset of DICT</strong> and takes the detail level one step deeper. It looks exactly like the above, except that the <em>“text”</em> items (<em>string</em>) in the spans are replaced by the list <em>“chars”</em>. Each <em>“chars”</em> entry is a character <em>dict</em>. For example, here is what you would see in place of item <em>“text”: “Text in black color.”</em> above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;chars&quot;</span><span class="p">:</span> <span class="p">[{</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">50.0</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">57.336997985839844</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;S&quot;</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">57.33700180053711</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">57.33700180053711</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">63.4530029296875</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;o&quot;</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">63.4530029296875</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">63.4530029296875</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">72.61600494384766</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;m&quot;</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">72.61600494384766</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">72.61600494384766</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">78.73200225830078</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;e&quot;</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">78.73200225830078</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">78.73200225830078</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">81.79000091552734</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot; &quot;</span>
<span class="o">&lt;</span> <span class="o">...</span> <span class="n">deleted</span> <span class="o">...</span> <span class="o">&gt;</span>
<span class="p">},</span> <span class="p">{</span>
    <span class="s2">&quot;origin&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">163.11297607421875</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">),</span>
    <span class="s2">&quot;bbox&quot;</span><span class="p">:</span> <span class="p">(</span><span class="mf">163.11297607421875</span><span class="p">,</span> <span class="mf">88.17500305175781</span><span class="p">,</span> <span class="mf">166.1709747314453</span><span class="p">,</span> <span class="mf">103.28900146484375</span><span class="p">),</span>
    <span class="s2">&quot;c&quot;</span><span class="p">:</span> <span class="s2">&quot;.&quot;</span>
<span class="p">}],</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="xml">
<h2>XML<a class="headerlink" href="#xml" title="此标题的永久链接">#</a></h2>
<p>XML</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--9-input--1" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractXML" title="TextPage.extractXML"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractXML()</span></code></a> (或 <em>Page.get_text(“xml”)</em>) 提供与 <a class="reference internal" href="textpage.html#TextPage.extractRAWDICT" title="TextPage.extractRAWDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractRAWDICT</span></code></a> 相同的细粒度信息，但以 <strong>XML 格式</strong> 组织数据，并且 <strong>仅包含文本(不包含图像)</strong>。</p>
<p>—</p>
<p>执行以下代码:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
<span class="go">    print(line)</span>
</pre></div>
</div>
<p>可能的输出如下:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">page</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;page0&quot;</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;300&quot;</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;350&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">block</span> <span class="n">bbox</span><span class="o">=</span><span class="s2">&quot;50 88.175 166.17098 103.289&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">line</span> <span class="n">bbox</span><span class="o">=</span><span class="s2">&quot;50 88.175 166.17098 103.289&quot;</span> <span class="n">wmode</span><span class="o">=</span><span class="s2">&quot;0&quot;</span> <span class="nb">dir</span><span class="o">=</span><span class="s2">&quot;1 0&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">font</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Helvetica&quot;</span> <span class="n">size</span><span class="o">=</span><span class="s2">&quot;11&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">char</span> <span class="n">quad</span><span class="o">=</span><span class="s2">&quot;50 88.175 57.336999 88.175 50 103.289 57.336999 103.289&quot;</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;50&quot;</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;S&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">char</span> <span class="n">quad</span><span class="o">=</span><span class="s2">&quot;57.337 88.175 63.453004 88.175 57.337 103.289 63.453004 103.289&quot;</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;57.337&quot;</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;o&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">char</span> <span class="n">quad</span><span class="o">=</span><span class="s2">&quot;63.453004 88.175 72.616008 88.175 63.453004 103.289 72.616008 103.289&quot;</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;63.453004&quot;</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;m&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">char</span> <span class="n">quad</span><span class="o">=</span><span class="s2">&quot;72.616008 88.175 78.732 88.175 72.616008 103.289 78.732 103.289&quot;</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;72.616008&quot;</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;e&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;</span><span class="n">char</span> <span class="n">quad</span><span class="o">=</span><span class="s2">&quot;78.732 88.175 81.79 88.175 78.732 103.289 81.79 103.289&quot;</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;78.732&quot;</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">/&gt;</span>

<span class="o">...</span> <span class="p">(</span><span class="n">部分字符省略</span><span class="p">)</span> <span class="o">...</span>

<span class="o">&lt;</span><span class="n">char</span> <span class="n">quad</span><span class="o">=</span><span class="s2">&quot;163.11298 88.175 166.17098 88.175 163.11298 103.289 166.17098 103.289&quot;</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;163.11298&quot;</span> <span class="n">y</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;#000000&quot;</span> <span class="n">c</span><span class="o">=</span><span class="s2">&quot;.&quot;</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="n">font</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">line</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">block</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">page</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>—</p>
<p><strong>说明：</strong></p>
<ul class="simple">
<li><p><strong>XML 结构</strong>：</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">&lt;page&gt;</span></code>: 页面级别</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">&lt;block&gt;</span></code>: 文本块 (段落)</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">&lt;line&gt;</span></code>: 文字行</p></li>
<li><p><code class="xref any docutils literal notranslate"><span class="pre">&lt;font&gt;</span></code>: 该行的字体信息</p></li>
<li><dl class="simple">
<dt><code class="xref any docutils literal notranslate"><span class="pre">&lt;char&gt;</span></code>: 每个字符的详细信息，包括：</dt><dd><ul>
<li><p><strong>quad</strong>: 四边形坐标 (用于文本变形或旋转)</p></li>
<li><p><strong>x, y</strong>: 字符的起始坐标</p></li>
<li><p><strong>color</strong>: 颜色信息</p></li>
<li><p><strong>c</strong>: 具体字符内容</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><strong>特点</strong>：</p></li>
<li><p>仅包含文本信息 (不包含图像)</p></li>
<li><p>适用于 <strong>结构化解析</strong></p></li>
<li><p>可与 <strong>XML 解析库</strong> (如 <code class="xref any docutils literal notranslate"><span class="pre">lxml</span></code> ) <strong>结合使用</strong></p></li>
</ul>
<p>—</p>
<p><strong>解析 XML 输出：</strong></p>
<p>你可以使用 Python <code class="xref any docutils literal notranslate"><span class="pre">lxml</span></code> 库解析此输出:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">lxml</span><span class="w"> </span><span class="kn">import</span> <span class="n">etree</span>

<span class="n">xml_text</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">etree</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">xml_text</span><span class="p">)</span>

<span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">root</span><span class="o">.</span><span class="n">xpath</span><span class="p">(</span><span class="s2">&quot;//char&quot;</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Character: </span><span class="si">{</span><span class="n">char</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">, Position: (</span><span class="si">{</span><span class="n">char</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">char</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>—</p>
<p><strong>适用场景：</strong></p>
<ul class="simple">
<li><p><strong>PDF 文字结构解析</strong></p></li>
<li><p><strong>文档格式化</strong></p></li>
<li><p><strong>字体分析</strong></p></li>
<li><p><strong>字符级定位</strong></p></li>
</ul>
<p>与 <a class="reference internal" href="textpage.html#TextPage.extractRAWDICT" title="TextPage.extractRAWDICT"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractRAWDICT</span></code></a> 相比， <a class="reference internal" href="textpage.html#TextPage.extractXML" title="TextPage.extractXML"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">extractXML</span></code></a> <strong>提供相同的信息，但采用 XML 结构</strong>，便于与标准 XML 解析工具集成。</p>
</div>
<input class="tab-input" id="tab-set--9-input--2" name="tab-set--9" type="radio"><label class="tab-label" for="tab-set--9-input--2">英文</label><div class="tab-content docutils container">
<p>The <a class="reference internal" href="textpage.html#TextPage.extractXML" title="TextPage.extractXML"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractXML()</span></code></a> (or <em>Page.get_text(“xml”)</em>) version extracts text (no images) with the detail level of RAWDICT:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;xml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">splitlines</span><span class="p">():</span>
<span class="go">    print(line)</span>

<span class="go">&lt;page id=&quot;page0&quot; width=&quot;300&quot; height=&quot;350&quot;&gt;</span>
<span class="go">&lt;block bbox=&quot;50 88.175 166.17098 103.289&quot;&gt;</span>
<span class="go">&lt;line bbox=&quot;50 88.175 166.17098 103.289&quot; wmode=&quot;0&quot; dir=&quot;1 0&quot;&gt;</span>
<span class="go">&lt;font name=&quot;Helvetica&quot; size=&quot;11&quot;&gt;</span>
<span class="go">&lt;char quad=&quot;50 88.175 57.336999 88.175 50 103.289 57.336999 103.289&quot; x=&quot;50&quot;</span>
<span class="go">y=&quot;100&quot; color=&quot;#000000&quot; c=&quot;S&quot;/&gt;</span>
<span class="go">&lt;char quad=&quot;57.337 88.175 63.453004 88.175 57.337 103.289 63.453004 103.289&quot; x=&quot;57.337&quot;</span>
<span class="go">y=&quot;100&quot; color=&quot;#000000&quot; c=&quot;o&quot;/&gt;</span>
<span class="go">&lt;char quad=&quot;63.453004 88.175 72.616008 88.175 63.453004 103.289 72.616008 103.289&quot; x=&quot;63.453004&quot;</span>
<span class="go">y=&quot;100&quot; color=&quot;#000000&quot; c=&quot;m&quot;/&gt;</span>
<span class="go">&lt;char quad=&quot;72.616008 88.175 78.732 88.175 72.616008 103.289 78.732 103.289&quot; x=&quot;72.616008&quot;</span>
<span class="go">y=&quot;100&quot; color=&quot;#000000&quot; c=&quot;e&quot;/&gt;</span>
<span class="go">&lt;char quad=&quot;78.732 88.175 81.79 88.175 78.732 103.289 81.79 103.289&quot; x=&quot;78.732&quot;</span>
<span class="go">y=&quot;100&quot; color=&quot;#000000&quot; c=&quot; &quot;/&gt;</span>

<span class="go">... deleted ...</span>

<span class="go">&lt;char quad=&quot;163.11298 88.175 166.17098 88.175 163.11298 103.289 166.17098 103.289&quot; x=&quot;163.11298&quot;</span>
<span class="go">y=&quot;100&quot; color=&quot;#000000&quot; c=&quot;.&quot;/&gt;</span>
<span class="go">&lt;/font&gt;</span>
<span class="go">&lt;/line&gt;</span>
<span class="go">&lt;/block&gt;</span>
<span class="go">&lt;/page&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>We have successfully tested <a class="reference external" href="https://pypi.org/project/lxml/">lxml</a> to interpret this output.</p>
</div>
</div>
</div>
</section>
<section id="xhtml">
<h2>XHTML<a class="headerlink" href="#xhtml" title="此标题的永久链接">#</a></h2>
<p>XHTML</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--10-input--1" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--1">中文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractXHTML" title="TextPage.extractXHTML"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractXHTML()</span></code></a> (或 <em>Page.get_text(“xhtml”)</em>) 是一种 <strong>TEXT 提取的 HTML 变体</strong>，其输出格式类似 HTML，但 <strong>仅包含基本文本和图片</strong>，即“语义化”输出。:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;page0&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Some</span> <span class="n">text</span> <span class="n">on</span> <span class="n">first</span> <span class="n">page</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--10-input--2" name="tab-set--10" type="radio"><label class="tab-label" for="tab-set--10-input--2">英文</label><div class="tab-content docutils container">
<p><a class="reference internal" href="textpage.html#TextPage.extractXHTML" title="TextPage.extractXHTML"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TextPage.extractXHTML()</span></code></a> (or <em>Page.get_text(“xhtml”)</em>) is a variation of TEXT but in HTML format, containing the bare text and images (“semantic” output):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;page0&quot;</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Some</span> <span class="n">text</span> <span class="n">on</span> <span class="n">first</span> <span class="n">page</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="text-extraction-flags">
<span id="id6"></span><h2>文本提取标志默认值<a class="headerlink" href="#text-extraction-flags" title="此标题的永久链接">#</a></h2>
<p>Text Extraction Flags Defaults</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--11-input--1" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--1">中文</label><div class="tab-content docutils container">
<ul>
<li><p>新功能 (版本 1.16.2) ：<code class="xref any docutils literal notranslate"><span class="pre">meth:Page.get_text</span></code> 方法支持一个关键字参数 <em>flags</em> (<em>int</em>)，用于控制提取数据的数量和质量。以下表格展示了每种提取方式的默认设置 (未提供 flags 或 flags 设置为 None) 。如果您指定了一个不同于 <em>None</em> 的 flags 值，请注意必须设置 <strong>所有期望的</strong> 选项。各个选项的位设置说明可以参见 <a class="reference internal" href="vars.html#textpreserve"><span class="std std-ref">字体属性</span></a>。</p></li>
<li><p>新功能 (版本 1.19.6) ：以下默认组合现在作为 Python 常量提供：<a class="reference internal" href="vars.html#TEXTFLAGS_TEXT" title="TEXTFLAGS_TEXT"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_TEXT</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_WORDS" title="TEXTFLAGS_WORDS"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_WORDS</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_BLOCKS" title="TEXTFLAGS_BLOCKS"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_BLOCKS</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_DICT" title="TEXTFLAGS_DICT"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_DICT</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_RAWDICT" title="TEXTFLAGS_RAWDICT"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_RAWDICT</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_HTML" title="TEXTFLAGS_HTML"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_HTML</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_XHTML" title="TEXTFLAGS_XHTML"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_XHTML</span></code></a> ，<a class="reference internal" href="vars.html#TEXTFLAGS_XML" title="TEXTFLAGS_XML"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_XML</span></code></a> 和 <a class="reference internal" href="vars.html#TEXTFLAGS_SEARCH" title="TEXTFLAGS_SEARCH"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_SEARCH</span></code></a> 。您现在可以轻松修改默认的 flag，例如：</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>包含</strong> 图像在 “blocks” 输出中：</p></li>
</ul>
<p><code class="xref any docutils literal notranslate"><span class="pre">flags</span> <span class="pre">=</span> <span class="pre">TEXTFLAGS_BLOCKS</span> <span class="pre">|</span> <span class="pre">TEXT_PRESERVE_IMAGES</span></code></p>
<ul class="simple">
<li><p><strong>排除</strong> 图像从 “dict” 输出中：</p></li>
</ul>
<p><code class="xref any docutils literal notranslate"><span class="pre">flags</span> <span class="pre">=</span> <span class="pre">TEXTFLAGS_DICT</span> <span class="pre">&amp;</span> <span class="pre">~TEXT_PRESERVE_IMAGES</span></code></p>
<ul class="simple">
<li><p>在文本搜索中设置 <strong>关闭断字</strong>：</p></li>
</ul>
<p><code class="xref any docutils literal notranslate"><span class="pre">flags</span> <span class="pre">=</span> <span class="pre">TEXTFLAGS_SEARCH</span> <span class="pre">&amp;</span> <span class="pre">~TEXT_DEHYPHENATE</span></code></p>
</div></blockquote>
</li>
</ul>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>指示器</p></th>
<th class="head"><p>text</p></th>
<th class="head"><p>html</p></th>
<th class="head"><p>xhtml</p></th>
<th class="head"><p>xml</p></th>
<th class="head"><p>dict</p></th>
<th class="head"><p>rawdict</p></th>
<th class="head"><p>words</p></th>
<th class="head"><p>blocks</p></th>
<th class="head"><p>search</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>保留连字</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>保留空白</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>保留图像</p></td>
<td><p>n/a</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>n/a</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>n/a</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>抑制空格</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>断字处理</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>裁剪到媒体框</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>使用 CID 而非 U+FFFD</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p><strong>search</strong>：表示文本搜索功能。</p></li>
<li><p><strong>“json”</strong> 与 <strong>“dict”</strong> 处理方式完全相同，因此被省略。</p></li>
<li><p><strong>“rawjson”</strong> 与 <strong>“rawdict”</strong> 处理方式完全相同，因此被省略。</p></li>
<li><p><strong>“n/a”</strong>：表示该项为 0，设置此位对输出没有影响 (但可能会对性能产生负面影响) 。</p></li>
<li><p>如果您对输出方式默认包含的图像不感兴趣，可以关闭相应的标志位：这样您将体验到更好的性能和更低的空间需求。</p></li>
</ul>
<p>展示 <a class="reference internal" href="vars.html#TEXT_INHIBIT_SPACES" title="TEXT_INHIBIT_SPACES"><code class="xref any py py-data docutils literal notranslate"><span class="pre">TEXT_INHIBIT_SPACES</span></code></a> 的效果:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
<span class="go">H a l l o !</span>
<span class="go">Mo r e  t e x t</span>
<span class="go">i s  f o l l o w i n g</span>
<span class="go">i n  E n g l i s h</span>
<span class="go">. . .  l e t &#39; s  s e e</span>
<span class="go">w h a t  h a p p e n s .</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">pymupdf</span><span class="o">.</span><span class="n">TEXT_INHIBIT_SPACES</span><span class="p">))</span>
<span class="go">Hallo!</span>
<span class="go">More text</span>
<span class="go">is following</span>
<span class="go">in English</span>
<span class="go">... let&#39;s see</span>
<span class="go">what happens.</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<input class="tab-input" id="tab-set--11-input--2" name="tab-set--11" type="radio"><label class="tab-label" for="tab-set--11-input--2">英文</label><div class="tab-content docutils container">
<ul>
<li><p>New in version 1.16.2: Method <a class="reference internal" href="page.html#Page.get_text" title="Page.get_text"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.get_text()</span></code></a> supports a keyword parameter <em>flags</em> <em>(int)</em> to control the amount and the quality of extracted data. The following table shows the defaults settings (flags parameter omitted or None) for each extraction variant. If you specify flags with a value other than <em>None</em>, be aware that you must set <strong>all desired</strong> options. A description of the respective bit settings can be found in <a class="reference internal" href="vars.html#textpreserve"><span class="std std-ref">字体属性</span></a>.</p></li>
<li><p>New in v1.19.6: The default combinations in the following table are now available as Python constants: <a class="reference internal" href="vars.html#TEXTFLAGS_TEXT" title="TEXTFLAGS_TEXT"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_TEXT</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_WORDS" title="TEXTFLAGS_WORDS"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_WORDS</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_BLOCKS" title="TEXTFLAGS_BLOCKS"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_BLOCKS</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_DICT" title="TEXTFLAGS_DICT"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_DICT</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_RAWDICT" title="TEXTFLAGS_RAWDICT"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_RAWDICT</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_HTML" title="TEXTFLAGS_HTML"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_HTML</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_XHTML" title="TEXTFLAGS_XHTML"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_XHTML</span></code></a>, <a class="reference internal" href="vars.html#TEXTFLAGS_XML" title="TEXTFLAGS_XML"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_XML</span></code></a>, and <a class="reference internal" href="vars.html#TEXTFLAGS_SEARCH" title="TEXTFLAGS_SEARCH"><code class="xref py py-data docutils literal notranslate"><span class="pre">TEXTFLAGS_SEARCH</span></code></a>. You can now easily modify a default flag, e.g.</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>include</strong> images in a “blocks” output:</p></li>
</ul>
<p><code class="xref any docutils literal notranslate"><span class="pre">flags</span> <span class="pre">=</span> <span class="pre">TEXTFLAGS_BLOCKS</span> <span class="pre">|</span> <span class="pre">TEXT_PRESERVE_IMAGES</span></code></p>
<ul class="simple">
<li><p><strong>exclude</strong> images from a “dict” output:</p></li>
</ul>
<p><code class="xref any docutils literal notranslate"><span class="pre">flags</span> <span class="pre">=</span> <span class="pre">TEXTFLAGS_DICT</span> <span class="pre">&amp;</span> <span class="pre">~TEXT_PRESERVE_IMAGES</span></code></p>
<ul class="simple">
<li><p>set <strong>dehyphenation off</strong> in text searches:</p></li>
</ul>
<p><code class="xref any docutils literal notranslate"><span class="pre">flags</span> <span class="pre">=</span> <span class="pre">TEXTFLAGS_SEARCH</span> <span class="pre">&amp;</span> <span class="pre">~TEXT_DEHYPHENATE</span></code></p>
</div></blockquote>
</li>
</ul>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Indicator</p></th>
<th class="head"><p>text</p></th>
<th class="head"><p>html</p></th>
<th class="head"><p>xhtml</p></th>
<th class="head"><p>xml</p></th>
<th class="head"><p>dict</p></th>
<th class="head"><p>rawdict</p></th>
<th class="head"><p>words</p></th>
<th class="head"><p>blocks</p></th>
<th class="head"><p>search</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>preserve ligatures</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>preserve whitespace</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>preserve images</p></td>
<td><p>n/a</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>n/a</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>n/a</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>inhibit spaces</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>dehyphenate</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>clip to mediabox</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>use CID instead of U+FFFD</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
</div>
<ul class="simple">
<li><p><strong>search</strong> refers to the text search function.</p></li>
<li><p><strong>“json”</strong> is handled exactly like <strong>“dict”</strong> and is hence left out.</p></li>
<li><p><strong>“rawjson”</strong> is handled exactly like <strong>“rawdict”</strong> and is hence left out.</p></li>
<li><p>An “n/a” specification means a value of 0 and setting this bit never has any effect on the output (but an adverse effect on performance).</p></li>
<li><p>If you are not interested in images when using an output variant which includes them by default, then by all means set the respective bit off: You will experience a better performance and much lower space requirements.</p></li>
</ul>
<p>To show the effect of <a class="reference internal" href="vars.html#TEXT_INHIBIT_SPACES" title="TEXT_INHIBIT_SPACES"><code class="xref any py py-data docutils literal notranslate"><span class="pre">TEXT_INHIBIT_SPACES</span></code></a> have a look at this example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">))</span>
<span class="go">H a l l o !</span>
<span class="go">Mo r e  t e x t</span>
<span class="go">i s  f o l l o w i n g</span>
<span class="go">i n  E n g l i s h</span>
<span class="go">. . .  l e t &#39; s  s e e</span>
<span class="go">w h a t  h a p p e n s .</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">flags</span><span class="o">=</span><span class="n">pymupdf</span><span class="o">.</span><span class="n">TEXT_INHIBIT_SPACES</span><span class="p">))</span>
<span class="go">Hallo!</span>
<span class="go">More text</span>
<span class="go">is following</span>
<span class="go">in English</span>
<span class="go">... let&#39;s see</span>
<span class="go">what happens.</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="id7">
<h2>性能<a class="headerlink" href="#id7" title="此标题的永久链接">#</a></h2>
<p>Performance</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--12-input--1" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--1">中文</label><div class="tab-content docutils container">
<p>文本提取方法在提供的信息量和资源需求、运行时间方面有显著差异。通常来说，更多的信息意味着需要更多的处理，并且会生成更大的数据量。</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>特别是图像对性能的影响 <strong>非常显著</strong> 。确保在不需要图像时通过 <em>flags</em> 参数将它们排除。在默认标志设置下，处理下面提到的 2,700 页文档需要 160 秒，而排除所有图像后，仅需不到 50% 的时间 (77 秒) 。</p>
</div>
<p>首先，所有方法相较于市面上的其他产品来说都是 <strong>非常快速</strong> 的。在处理速度方面，我们不知道有更快的 (免费的) 工具。即使是最详细的方法，RAWDICT，也能在不到 5 秒的时间内处理完《AdobeManual》的 1,310 页 (简单文本处理时间不到 2 秒) 。</p>
<p>下表显示了平均相对速度 (“RSpeed”，基准值 1.00 为 TEXT) ，基于大约 1,400 页文本密集型和 1,300 页图像密集型页面。</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>方法</p></th>
<th class="head"><p>RSpeed</p></th>
<th class="head"><p>备注</p></th>
<th class="head"><p>无图像时</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TEXT</p></td>
<td><p>1.00</p></td>
<td><p>无图像，  <strong>纯</strong> 文本，带换行符</p></td>
<td><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>BLOCKS</p></td>
<td><p>1.00</p></td>
<td><p><strong>仅</strong> 图像边界框 (bbox), <strong>block</strong> 级文本与边界框，带换行符</p></td>
<td><p>1.00</p></td>
</tr>
<tr class="row-even"><td><p>WORDS</p></td>
<td><p>1.02</p></td>
<td><p>无图像, <strong>word</strong> 级文本与边界框</p></td>
<td><p>1.02</p></td>
</tr>
<tr class="row-odd"><td><p>XML</p></td>
<td><p>2.72</p></td>
<td><p>无图像, <strong>char</strong> 级文本,布局和字体细节</p></td>
<td><p>2.72</p></td>
</tr>
<tr class="row-even"><td><p>XHTML</p></td>
<td><p>3.32</p></td>
<td><p><strong>base64</strong> 图像, <strong>span</strong> 级文本, 无布局信息</p></td>
<td><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>HTML</p></td>
<td><p>3.54</p></td>
<td><p><strong>base64</strong> 图像, <strong>span</strong> 级文本, 带布局和字体细节</p></td>
<td><p>1.01</p></td>
</tr>
<tr class="row-even"><td><p>DICT</p></td>
<td><p>3.93</p></td>
<td><p><strong>binary</strong> 图像, <strong>span</strong> 级文本, 带布局和字体细节</p></td>
<td><p>1.04</p></td>
</tr>
<tr class="row-odd"><td><p>RAWDICT</p></td>
<td><p>4.50</p></td>
<td><p><strong>binary</strong> 图像, <strong>char</strong> 级文本, 带布局和字体细节</p></td>
<td><p>1.68</p></td>
</tr>
</tbody>
</table>
</div>
<p>如表所示：当排除图像提取 (最后一列) 时，相对速度变化显著：除了 RAWDICT 和 XML，其他方法几乎同样快速，而 RAWDICT 比 <strong>现在最慢的 XML</strong> 快 40% 的执行时间。</p>
<p>更多性能信息请参见 <strong>附录 1</strong> 。</p>
</div>
<input class="tab-input" id="tab-set--12-input--2" name="tab-set--12" type="radio"><label class="tab-label" for="tab-set--12-input--2">英文</label><div class="tab-content docutils container">
<p>The text extraction methods differ significantly both: in terms of information they supply, and in terms of resource requirements and runtimes. Generally, more information of course means, that more processing is required and a higher data volume is generated.</p>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>Especially images have a <strong>very significant</strong> impact. Make sure to exclude them (via the <em>flags</em> parameter) whenever you do not need them. To process the below mentioned 2’700 total pages with default flags settings required 160 seconds across all extraction methods. When all images where excluded, less than 50% of that time (77 seconds) were needed.</p>
</div>
<p>To begin with, all methods are <strong>very fast</strong> in relation to other products out there in the market. In terms of processing speed, we are not aware of a faster (free) tool. Even the most detailed method, RAWDICT, processes all 1’310 pages of the <a class="reference internal" href="app3.html#adobemanual"><span class="std std-ref">Adobe PDF 参考</span></a> in less than 5 seconds (simple text needs less than 2 seconds here).</p>
<p>The following table shows average relative speeds (“RSpeed”, baseline 1.00 is TEXT), taken across ca. 1400 text-heavy and 1300 image-heavy pages.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>RSpeed</p></th>
<th class="head"><p>Comments</p></th>
<th class="head"><p>no images</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>TEXT</p></td>
<td><p>1.00</p></td>
<td><p>no images, <strong>plain</strong> text, line breaks</p></td>
<td><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>BLOCKS</p></td>
<td><p>1.00</p></td>
<td><p>image bboxes (only), <strong>block</strong> level text with bboxes, line breaks</p></td>
<td><p>1.00</p></td>
</tr>
<tr class="row-even"><td><p>WORDS</p></td>
<td><p>1.02</p></td>
<td><p>no images, <strong>word</strong> level text with bboxes</p></td>
<td><p>1.02</p></td>
</tr>
<tr class="row-odd"><td><p>XML</p></td>
<td><p>2.72</p></td>
<td><p>no images, <strong>char</strong> level text, layout and font details</p></td>
<td><p>2.72</p></td>
</tr>
<tr class="row-even"><td><p>XHTML</p></td>
<td><p>3.32</p></td>
<td><p><strong>base64</strong> images, <strong>span</strong> level text, no layout info</p></td>
<td><p>1.00</p></td>
</tr>
<tr class="row-odd"><td><p>HTML</p></td>
<td><p>3.54</p></td>
<td><p><strong>base64</strong> images, <strong>span</strong> level text, layout and font details</p></td>
<td><p>1.01</p></td>
</tr>
<tr class="row-even"><td><p>DICT</p></td>
<td><p>3.93</p></td>
<td><p><strong>binary</strong> images, <strong>span</strong> level text, layout and font details</p></td>
<td><p>1.04</p></td>
</tr>
<tr class="row-odd"><td><p>RAWDICT</p></td>
<td><p>4.50</p></td>
<td><p><strong>binary</strong> images, <strong>char</strong> level text, layout and font details</p></td>
<td><p>1.68</p></td>
</tr>
</tbody>
</table>
</div>
<p>As mentioned: when excluding image extraction (last column), the relative speeds are changing drastically: except RAWDICT and XML, the other methods are almost equally fast, and RAWDICT requires 40% less execution time than the <strong>now slowest XML</strong>.</p>
<p>Look at chapter <strong>Appendix 1</strong> for more performance information.</p>
</div>
</div>
<div class="feedbackLink"><a id="feedbackLinkBottom" target=_blank>您对此页面有任何反馈吗？</b></a></div><hr class="docutils" />
<script>

   var url_string = window.location.href;
   var a = document.getElementById('feedbackLinkBottom');
   a.setAttribute("href", "https://artifex.com/contributor/feedback.php?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link&url="+url_string);

</script>

<p style="color:#999" id="footerDisclaimer">本软件按原样提供，不作任何明示或暗示担保。本软件根据许可分发，除非根据该许可条款明确授权，否则不得复制、修改或分发。请参阅 <a href="https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link">artifex.com</a> 上的许可信息，或联系 Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129, United States 了解更多信息。</p>



<script>

   let docLanguage = document.getElementsByTagName('html')[0].getAttribute('lang');

   function getHeaderAndFooterTranslation(str) {
       if (docLanguage == "ja") {
           if (str == "Do you have any feedback on this page?") {
               return "このページに関するご意見はありますか？";
           } else if (str == "Find <b>#pymupdf</b> on <b>Discord</b>") {
               return "<b>Discord</b>の <b>#pymupdf</b> を見つける";
           } else if (str == "This software is provided AS-IS with no warranty, either express or implied. This software is distributed under license and may not be copied, modified or distributed except as expressly authorized under the terms of that license. Refer to licensing information at <a href='https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link'>artifex.com</a> or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129, United States for further information.") {

               return "このソフトウェアは無保証で提供されており、明示または黙示を問わず、いかなる保証もありません。このソフトウェアはライセンスの下で配布され、ライセンスの条件に明示的に許可されている場合を除き、コピー、変更、または配布してはなりません。ライセンシング情報については、<a href='https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link'>artifex.com</a>でライセンス情報を参照するか、アメリカ合衆国カリフォルニア州サンフランシスコのArtifex Software Inc. までお問い合わせください。"

           }
       }

       return str;
   }

   document.getElementById("findOnDiscord").innerHTML = getHeaderAndFooterTranslation("Find <b>#pymupdf</b> on <b>Discord</b>");
   document.getElementById("feedbackLinkTop").innerHTML = getHeaderAndFooterTranslation("Do you have any feedback on this page?");
   document.getElementById("feedbackLinkBottom").innerHTML = getHeaderAndFooterTranslation("Do you have any feedback on this page?");
   document.getElementById("footerDisclaimer").innerHTML = getHeaderAndFooterTranslation("This software is provided AS-IS with no warranty, either express or implied. This software is distributed under license and may not be copied, modified or distributed except as expressly authorized under the terms of that license. Refer to licensing information at <a href='https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link'>artifex.com</a> or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129, United States for further information.");


   // more translation for admonition-title as the in-built translation isn't great, needs: 注釈 -> 注
   if (docLanguage == "ja") {
       const collection = document.getElementsByClassName("admonition-title");
       for (var i=0;i<collection.length;i++) {
           collection[i].innerHTML = "注";
       }
   }


</script><p class="footer-version">This documentation covers all versions up to 1.25.4.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="app2.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">附录 2：嵌入式文件的注意事项</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="colors.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">颜色数据库</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2015-2025, Artifex
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 19. 3月 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">附录 1：文本提取详细信息</a><ul>
<li><a class="reference internal" href="#textpage">TextPage 的一般结构</a></li>
<li><a class="reference internal" href="#id2">纯文本</a></li>
<li><a class="reference internal" href="#id3">块</a></li>
<li><a class="reference internal" href="#id4">单词</a></li>
<li><a class="reference internal" href="#html">HTML</a></li>
<li><a class="reference internal" href="#htmlquality">控制 HTML 输出的质量</a></li>
<li><a class="reference internal" href="#dict-json">DICT (或 JSON)</a></li>
<li><a class="reference internal" href="#rawdict-rawjson">RAWDICT (或 RAWJSON)</a></li>
<li><a class="reference internal" href="#xml">XML</a></li>
<li><a class="reference internal" href="#xhtml">XHTML</a></li>
<li><a class="reference internal" href="#text-extraction-flags">文本提取标志默认值</a></li>
<li><a class="reference internal" href="#id7">性能</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="_static/translations.js"></script>
    </body>
</html>