<!doctype html>
<html class="no-js" lang="zh-CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta content="Artifex" name="author" />
<meta content="PyMuPDF 是一个高性能 Python 库，用于 PDF（及其他）文档的数据提取、分析、转换和操作。" name="description" />
<meta content="PDF Text Extraction, PDF Image Extraction, PDF Conversion, PDF Tables, PDF Splitting, PDF Creation, Pyodide, PyScript" name="keywords" />

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JZTN4VTL9M"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-JZTN4VTL9M');
    </script>
    <link rel="author" title="关于此文档" href="about.html" /><link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" /><link rel="next" title="故事" href="recipes-stories.html" /><link rel="prev" title="注释" href="recipes-annotations.html" />

    <link rel="shortcut icon" href="_static/PyMuPDF.ico"/><!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>绘图和图形 - PyMuPDF 1.25.4 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
    


<style>
  body {
    --color-code-background: #eeffcc;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">PyMuPDF 1.25.4 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/sidebar-logo-dark.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/sidebar-logo-light.svg" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">PyMuPDF 1.25.4 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">关于/About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">功能比较</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html#about-performance">性能</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html#about-license">许可和版权</a></li>
<li class="toctree-l1"><a class="reference internal" href="pymupdf4llm/index.html">PyMuPDF4LLM</a></li>
<li class="toctree-l1"><a class="reference internal" href="pymupdf-pro.html">PyMuPDF Pro</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">用户指南/User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="the-basics.html">基础用法</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="rag.html">PyMuPDF、LLM 和 RAG</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">资源</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">教程/How to Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="how-to-open-a-file.html">打开文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-text.html">文本</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-images.html">图片</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-annotations.html">注释</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">绘图和图形</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-stories.html">故事</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-journalling.html">日记</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-multiprocessing.html">多进程</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-ocr.html">OCR - 光学字符识别</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-optional-content.html">可选内容支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-low-level-interfaces.html">低级接口</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes-common-issues-and-their-solutions.html">常见问题及其解决方案</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API参考/API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="module.html">命令行界面</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="classes.html">类</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="annot.html">Annot</a></li>
<li class="toctree-l2"><a class="reference internal" href="archive-class.html">Archive</a></li>
<li class="toctree-l2"><a class="reference internal" href="colorspace.html">Colorspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="displaylist.html">DisplayList</a></li>
<li class="toctree-l2"><a class="reference internal" href="document.html">Document</a></li>
<li class="toctree-l2"><a class="reference internal" href="document-writer-class.html">DocumentWriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="font.html">Font</a></li>
<li class="toctree-l2"><a class="reference internal" href="identity.html">Identity</a></li>
<li class="toctree-l2"><a class="reference internal" href="irect.html">IRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="link.html">Link</a></li>
<li class="toctree-l2"><a class="reference internal" href="linkdest.html">linkDest</a></li>
<li class="toctree-l2"><a class="reference internal" href="matrix.html">Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="outline.html">Outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="page.html">Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="pixmap.html">Pixmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="point.html">Point</a></li>
<li class="toctree-l2"><a class="reference internal" href="quad.html">Quad</a></li>
<li class="toctree-l2"><a class="reference internal" href="rect.html">Rect</a></li>
<li class="toctree-l2"><a class="reference internal" href="shape.html">Shape</a></li>
<li class="toctree-l2"><a class="reference internal" href="story-class.html">Story</a></li>
<li class="toctree-l2"><a class="reference internal" href="textpage.html">TextPage</a></li>
<li class="toctree-l2"><a class="reference internal" href="textwriter.html">TextWriter</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="widget.html">Widget</a></li>
<li class="toctree-l2"><a class="reference internal" href="xml-class.html">Xml</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="algebra.html">几何对象的运算符代数</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="lowlevel.html">低级函数和类</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="functions.html">函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="device.html">设备</a></li>
<li class="toctree-l2"><a class="reference internal" href="coop_low.html">协同工作: DisplayList 和 TextPage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">术语</a></li>
<li class="toctree-l1"><a class="reference internal" href="vars.html">常量和枚举</a></li>
<li class="toctree-l1"><a class="reference internal" href="colors.html">颜色数据库</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">其他/Other</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="app1.html">附录 1：文本提取详细信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="app2.html">附录 2：嵌入式文件的注意事项</a></li>
<li class="toctree-l1"><a class="reference internal" href="app3.html">附录 3：各类技术信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="app4.html">附录 4：性能比较方法</a></li>
<li class="toctree-l1"><a class="reference internal" href="changes.html">更新日志</a></li>
<li class="toctree-l1"><a class="reference internal" href="znames.html">已废弃名称</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div style="display:flex;justify-content:space-between;align-items: center;">
    <form class="sidebar-search-container top" method="get" action="search.html" role="search" style="width:75%">
      <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
      <input type="hidden" name="check_keywords" value="yes">
      <input type="hidden" name="area" value="default">
    </form>
</div>

<div style="display:flex;justify-content:space-between;align-items:center;margin-top:20px;">
    <div class="discordLink" style="display:flex;align-items:center;margin-top: -5px;">
        <a href="https://discord.gg/TSpYGBW4eq" id="findOnDiscord" target=_blank>Find <b>#pymupdf</b> on <b>Discord</b></a>
        <a href="https://discord.gg/TSpYGBW4eq" target=_blank>
            <div style="width:30px;height:30px;margin-left:5px;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 127.14 96.36">
                    <defs>
                        <style>.discordLogoFill{fill:#5865f2;}</style>
                    </defs>
                    <g id="Discord_Logo" data-name="Discord Logo">
                        <path class="discordLogoFill" d="M107.7,8.07A105.15,105.15,0,0,0,81.47,0a72.06,72.06,0,0,0-3.36,6.83A97.68,97.68,0,0,0,49,6.83,72.37,72.37,0,0,0,45.64,0,105.89,105.89,0,0,0,19.39,8.09C2.79,32.65-1.71,56.6.54,80.21h0A105.73,105.73,0,0,0,32.71,96.36,77.7,77.7,0,0,0,39.6,85.25a68.42,68.42,0,0,1-10.85-5.18c.91-.66,1.8-1.34,2.66-2a75.57,75.57,0,0,0,64.32,0c.87.71,1.76,1.39,2.66,2a68.68,68.68,0,0,1-10.87,5.19,77,77,0,0,0,6.89,11.1A105.25,105.25,0,0,0,126.6,80.22h0C129.24,52.84,122.09,29.11,107.7,8.07ZM42.45,65.69C36.18,65.69,31,60,31,53s5-12.74,11.43-12.74S54,46,53.89,53,48.84,65.69,42.45,65.69Zm42.24,0C78.41,65.69,73.25,60,73.25,53s5-12.74,11.44-12.74S96.23,46,96.12,53,91.08,65.69,84.69,65.69Z"/>
                    </g>
                </svg>
            </div>
        </a>
    </div>

</div><section id="recipesdrawingandgraphics">
<span id="id1"></span><h1>绘图和图形<a class="headerlink" href="#recipesdrawingandgraphics" title="此标题的永久链接">#</a></h1>
<p>Drawing and Graphics</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--0-input--1" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--1">中文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>当本文提及 “Drawings” 或 “Graphics” 时，我们指的是 “Vector Graphics” 或 “Line Art”。</p>
<p>因此，请将这些术语视为同义词！</p>
</div>
<p>PDF 文件在其语法中支持基本的绘图操作。这些是 <strong>矢量图形</strong>，包括线条、曲线、圆形、矩形等基本几何对象，并允许指定颜色。</p>
<p>这些操作的语法在 <a class="reference internal" href="app3.html#adobemanual"><span class="std std-ref">Adobe PDF 参考</span></a> 第 643 页的 “A Operator Summary” 章节中定义。在 PDF 页面上指定这些操作时，它们位于 <a class="reference internal" href="glossary.html#contents" title="contents"><code class="xref py py-data docutils literal notranslate"><span class="pre">contents</span></code></a> 对象中。</p>
<p><cite>PyMuPDF</cite> 通过其 <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> 类实现了大部分可用的绘图功能，该类类似于其他软件包中的 “canvas”（例如 <a class="reference external" href="https://pypi.org/project/reportlab/">reportlab</a>）。</p>
<p>形状（Shape）始终作为 <strong>页面的子对象</strong> 创建，通常使用 <code class="xref any docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">page.new_shape()</span></code> 进行初始化。该类定义了多个方法，可在页面区域上执行绘图操作。例如，<code class="xref any docutils literal notranslate"><span class="pre">last_point</span> <span class="pre">=</span> <span class="pre">shape.draw_rect(rect)</span></code> 可沿 <code class="xref any docutils literal notranslate"><span class="pre">rect</span> <span class="pre">=</span> <span class="pre">pymupdf.Rect(...)</span></code> 定义的边界绘制一个矩形。</p>
<p>返回的 <em>last_point</em> <strong>始终</strong> 是绘图操作结束时的 <a class="reference internal" href="point.html#point"><span class="std std-ref">Point</span></a> （即 “最后一个点”）。每个基本绘图操作都需要后续调用 <a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Shape.finish()</span></code></a> 以 “结束” 该操作，但多个绘图可以共享一个 <a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref any py py-meth docutils literal notranslate"><span class="pre">finish()</span></code></a> 方法。</p>
<p>实际上，<a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Shape.finish()</span></code></a> <em>定义</em> 了一组先前的绘图操作，使其形成一个（可能相当复杂的）图形对象。<cite>PyMuPDF</cite> 提供了多个预定义图形，存放于 <a class="reference external" href="https://github.com/pymupdf/PyMuPDF-Utilities/blob/master/shapes/shapes_and_symbols.py">shapes_and_symbols.py</a> 文件中，该文件展示了这些功能的使用方式。</p>
<p>如果导入此脚本，还可以直接使用其中的图形，如下所示:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Sun Dec  9 08:34:06 2018</span>

<span class="sd">@author: Jorj</span>
<span class="sd">@license: GNU AFFERO GPL V3</span>

<span class="sd">创建一个包含 shapes_and_symbols.py 中定义的可用符号的列表。</span>

<span class="sd">此外，该示例还演示了这些符号的使用方式，例如将它们用作文本中的项目符号。</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pymupdf</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shapes_and_symbols</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sas</span>

<span class="c1"># 可用符号函数及其描述列表</span>
<span class="n">tlist</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">arrow</span><span class="p">,</span> <span class="s2">&quot;箭头 (简单)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">caro</span><span class="p">,</span> <span class="s2">&quot;菱形 (简单)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">clover</span><span class="p">,</span> <span class="s2">&quot;三叶草 (简单)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">diamond</span><span class="p">,</span> <span class="s2">&quot;钻石 (简单)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">dontenter</span><span class="p">,</span> <span class="s2">&quot;禁止通行 (中等)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">frowney</span><span class="p">,</span> <span class="s2">&quot;皱眉脸 (中等)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">hand</span><span class="p">,</span> <span class="s2">&quot;手形 (复杂)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">heart</span><span class="p">,</span> <span class="s2">&quot;爱心 (简单)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">pencil</span><span class="p">,</span> <span class="s2">&quot;铅笔 (非常复杂)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">smiley</span><span class="p">,</span> <span class="s2">&quot;笑脸 (简单)&quot;</span><span class="p">),</span>
        <span class="p">]</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>  <span class="c1"># 符号所在的第一个矩形区域</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># 下一个矩形的偏移量</span>
<span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="n">r</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">)</span>  <span class="c1"># 说明文本的起始位置</span>
<span class="n">rlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">]</span>  <span class="c1"># 矩形区域列表</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tlist</span><span class="p">)):</span>  <span class="c1"># 生成所有矩形区域</span>
    <span class="n">rlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rlist</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">)</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>  <span class="c1"># 创建空白 PDF</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">new_page</span><span class="p">()</span>  <span class="c1"># 创建空白页面</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">new_shape</span><span class="p">()</span>  <span class="c1"># 创建 Shape（画布）</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rlist</span><span class="p">):</span>
    <span class="n">tlist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">shape</span><span class="p">,</span> <span class="n">rlist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># 执行符号绘制</span>
    <span class="n">shape</span><span class="o">.</span><span class="n">insert_text</span><span class="p">(</span><span class="n">rlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">br</span> <span class="o">+</span> <span class="n">p</span><span class="p">,</span>  <span class="c1"># 插入描述文本</span>
                <span class="n">tlist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mf">1.2</span><span class="p">)</span>

<span class="c1"># 将所有内容提交到页面的 /Contents 对象</span>
<span class="n">shape</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">scriptdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">doc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scriptdir</span><span class="p">,</span> <span class="s2">&quot;symbol-list.pdf&quot;</span><span class="p">))</span>  <span class="c1"># 保存 PDF 文件</span>
</pre></div>
</div>
<p>该脚本的运行结果如下所示：</p>
<a class="reference internal image-reference" href="_images/img-symbols.jpg"><img alt="_images/img-symbols.jpg" src="_images/img-symbols.jpg" style="width: 315.5px; height: 377.5px;" /></a>
</div>
<input class="tab-input" id="tab-set--0-input--2" name="tab-set--0" type="radio"><label class="tab-label" for="tab-set--0-input--2">英文</label><div class="tab-content docutils container">
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>When the terms “Drawings” or “Graphics” are mentioned here we are referring to “Vector Graphics” or “Line Art”.</p>
<p>Therefore please consider these terms as being synonymous!</p>
</div>
<p>PDF files support elementary drawing operations as part of their syntax. These are <strong>vector graphics</strong> and include basic geometrical objects like lines, curves, circles, rectangles including specifying colors.</p>
<p>The syntax for such operations is defined in “A Operator Summary” on page 643 of the <a class="reference internal" href="app3.html#adobemanual"><span class="std std-ref">Adobe PDF 参考</span></a>. Specifying these operators for a PDF page happens in its <a class="reference internal" href="glossary.html#contents" title="contents"><code class="xref py py-data docutils literal notranslate"><span class="pre">contents</span></code></a> objects.</p>
<p><cite>PyMuPDF</cite> implements a large part of the available features via its <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> class, which is comparable to notions like “canvas” in other packages (e.g. <a class="reference external" href="https://pypi.org/project/reportlab/">reportlab</a>).</p>
<p>A shape is always created as a <strong>child of a page</strong>, usually with an instruction like <code class="xref any docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">page.new_shape()</span></code>. The class defines numerous methods that perform drawing operations on the page’s area. For example, <code class="xref any docutils literal notranslate"><span class="pre">last_point</span> <span class="pre">=</span> <span class="pre">shape.draw_rect(rect)</span></code> draws a rectangle along the borders of a suitably defined <code class="xref any docutils literal notranslate"><span class="pre">rect</span> <span class="pre">=</span> <span class="pre">pymupdf.Rect(...)</span></code>.</p>
<p>The returned <em>last_point</em> <strong>always</strong> is the <a class="reference internal" href="point.html#point"><span class="std std-ref">Point</span></a> where drawing operation ended (“last point”). Every such elementary drawing requires a subsequent <a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Shape.finish()</span></code></a> to “close” it, but there may be multiple drawings which have one common <code class="docutils literal notranslate"><span class="pre">finish()</span></code> method.</p>
<p>In fact, <a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Shape.finish()</span></code></a> <em>defines</em> a group of preceding draw operations to form one – potentially rather complex – graphics object. <cite>PyMuPDF</cite> provides several predefined graphics in <a class="reference external" href="https://github.com/pymupdf/PyMuPDF-Utilities/blob/master/shapes/shapes_and_symbols.py">shapes_and_symbols.py</a> which demonstrate how this works.</p>
<p>If you import this script, you can also directly use its graphics as in the following example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Sun Dec  9 08:34:06 2018</span>

<span class="sd">@author: Jorj</span>
<span class="sd">@license: GNU AFFERO GPL V3</span>

<span class="sd">Create a list of available symbols defined in shapes_and_symbols.py</span>

<span class="sd">This also demonstrates an example usage: how these symbols could be used</span>
<span class="sd">as bullet-point symbols in some text.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">pymupdf</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">shapes_and_symbols</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sas</span>

<span class="c1"># list of available symbol functions and their descriptions</span>
<span class="n">tlist</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">arrow</span><span class="p">,</span> <span class="s2">&quot;arrow (easy)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">caro</span><span class="p">,</span> <span class="s2">&quot;caro (easy)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">clover</span><span class="p">,</span> <span class="s2">&quot;clover (easy)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">diamond</span><span class="p">,</span> <span class="s2">&quot;diamond (easy)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">dontenter</span><span class="p">,</span> <span class="s2">&quot;do not enter (medium)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">frowney</span><span class="p">,</span> <span class="s2">&quot;frowney (medium)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">hand</span><span class="p">,</span> <span class="s2">&quot;hand (complex)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">heart</span><span class="p">,</span> <span class="s2">&quot;heart (easy)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">pencil</span><span class="p">,</span> <span class="s2">&quot;pencil (very complex)&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">sas</span><span class="o">.</span><span class="n">smiley</span><span class="p">,</span> <span class="s2">&quot;smiley (easy)&quot;</span><span class="p">),</span>
        <span class="p">]</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>  <span class="c1"># first rect to contain a symbol</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">height</span> <span class="o">+</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># displacement to next rect</span>
<span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="n">r</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.2</span><span class="p">)</span>  <span class="c1"># starting point of explanation text</span>
<span class="n">rlist</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">]</span>  <span class="c1"># rectangle list</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tlist</span><span class="p">)):</span>  <span class="c1"># fill in all the rectangles</span>
    <span class="n">rlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rlist</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">)</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>  <span class="c1"># create empty PDF</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">new_page</span><span class="p">()</span>  <span class="c1"># create an empty page</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">new_shape</span><span class="p">()</span>  <span class="c1"># start a Shape (canvas)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rlist</span><span class="p">):</span>
    <span class="n">tlist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">](</span><span class="n">shape</span><span class="p">,</span> <span class="n">rlist</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>  <span class="c1"># execute symbol creation</span>
    <span class="n">shape</span><span class="o">.</span><span class="n">insert_text</span><span class="p">(</span><span class="n">rlist</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">br</span> <span class="o">+</span> <span class="n">p</span><span class="p">,</span>  <span class="c1"># insert description text</span>
                <span class="n">tlist</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mf">1.2</span><span class="p">)</span>

<span class="c1"># store everything to the page&#39;s /Contents object</span>
<span class="n">shape</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">scriptdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
<span class="n">doc</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">scriptdir</span><span class="p">,</span> <span class="s2">&quot;symbol-list.pdf&quot;</span><span class="p">))</span>  <span class="c1"># save the PDF</span>
</pre></div>
</div>
<p>This is the script’s outcome:</p>
<img alt="_images/img-symbols.jpg" src="_images/img-symbols.jpg" />
<dl class="field-list simple">
<dt class="field-odd">scale<span class="colon">:</span></dt>
<dd class="field-odd"><p>50</p>
</dd>
</dl>
</div>
</div>
<hr class="docutils" />
<section id="recipesdrawingandgraphics-extract-drawings">
<span id="id4"></span><h2>如何提取绘图<a class="headerlink" href="#recipesdrawingandgraphics-extract-drawings" title="此标题的永久链接">#</a></h2>
<p>How to Extract Drawings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--1-input--1" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--1">中文</label><div class="tab-content docutils container">
<ul class="simple">
<li><p>新增于 v1.18.0</p></li>
</ul>
<p>页面发出的绘图命令（<strong>矢量图形</strong>）可以被提取为字典列表。有趣的是，这不仅适用于 <cite>PDF</cite>，而是 <a class="reference internal" href="how-to-open-a-file.html#supported-file-types"><span class="std std-ref">所有支持的文档类型</span></a>，包括 XPS、EPUB 等。</p>
<p><a class="reference internal" href="page.html#Page.get_drawings" title="Page.get_drawings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.get_drawings()</span></code></a> 方法可以访问绘图命令，并将其转换为 Python 字典列表。每个字典（称为 “path”）表示一个独立的绘图对象，可以是简单的一条线，也可以是前一节介绍的复杂图形（由线条和曲线组合而成）。</p>
<p><em>path</em> 字典的设计便于与 <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> 类及其方法结合使用。例如，以下示例展示了如何在 <code class="xref any docutils literal notranslate"><span class="pre">Rect(100,</span> <span class="pre">100,</span> <span class="pre">200,</span> <span class="pre">200)</span></code> 矩形区域内绘制一个红色边框、黄色填充的圆:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_drawings</span><span class="p">())</span>
<span class="go">[{&#39;closePath&#39;: True,</span>
<span class="go">&#39;color&#39;: [1.0, 0.0, 0.0],</span>
<span class="go">&#39;dashes&#39;: &#39;[] 0&#39;,</span>
<span class="go">&#39;even_odd&#39;: False,</span>
<span class="go">&#39;fill&#39;: [1.0, 1.0, 0.0],</span>
<span class="go">&#39;items&#39;: [(&#39;c&#39;,</span>
<span class="go">            Point(100.0, 150.0),</span>
<span class="go">            Point(100.0, 177.614013671875),</span>
<span class="go">            Point(122.38600158691406, 200.0),</span>
<span class="go">            Point(150.0, 200.0)),</span>
<span class="go">            (&#39;c&#39;,</span>
<span class="go">            Point(150.0, 200.0),</span>
<span class="go">            Point(177.61399841308594, 200.0),</span>
<span class="go">            Point(200.0, 177.614013671875),</span>
<span class="go">            Point(200.0, 150.0)),</span>
<span class="go">            (&#39;c&#39;,</span>
<span class="go">            Point(200.0, 150.0),</span>
<span class="go">            Point(200.0, 122.385986328125),</span>
<span class="go">            Point(177.61399841308594, 100.0),</span>
<span class="go">            Point(150.0, 100.0)),</span>
<span class="go">            (&#39;c&#39;,</span>
<span class="go">            Point(150.0, 100.0),</span>
<span class="go">            Point(122.38600158691406, 100.0),</span>
<span class="go">            Point(100.0, 122.385986328125),</span>
<span class="go">            Point(100.0, 150.0))],</span>
<span class="go">&#39;lineCap&#39;: (0, 0, 0),</span>
<span class="go">&#39;lineJoin&#39;: 0,</span>
<span class="go">&#39;opacity&#39;: 1.0,</span>
<span class="go">&#39;rect&#39;: Rect(100.0, 100.0, 200.0, 200.0),</span>
<span class="go">&#39;width&#39;: 1.0}]</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>绘制一个精确的圆至少需要 4 条三阶 Bézier 曲线。更多背景信息请参考 <a class="reference external" href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">维基百科</a>。</p>
</div>
<p>以下代码片段提取页面的绘图数据，并在新页面上重新绘制:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pymupdf</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;some.file&quot;</span><span class="p">)</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">paths</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_drawings</span><span class="p">()</span>  <span class="c1"># 提取绘图数据</span>
<span class="c1"># paths 是一个 &quot;path&quot; 列表，可直接使用 Shape 重新绘制</span>
<span class="c1"># -------------------------------------------------------------------------</span>

<span class="c1"># 创建与原页面尺寸相同的新页面</span>
<span class="n">outpdf</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="n">outpage</span> <span class="o">=</span> <span class="n">outpdf</span><span class="o">.</span><span class="n">new_page</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">outpage</span><span class="o">.</span><span class="n">new_shape</span><span class="p">()</span>  <span class="c1"># 创建绘图画布</span>
<span class="c1"># --------------------------------------</span>
<span class="c1"># 遍历 paths 并绘制它们</span>
<span class="c1"># --------------------------------------</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="c1"># ------------------------------------</span>
    <span class="c1"># 遍历 &#39;items&#39; 列表的每个元素</span>
    <span class="c1"># ------------------------------------</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;items&quot;</span><span class="p">]:</span>  <span class="c1"># 这些是绘图命令</span>
        <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span>  <span class="c1"># 线条</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_line</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;re&quot;</span><span class="p">:</span>  <span class="c1"># 矩形</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_rect</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;qu&quot;</span><span class="p">:</span>  <span class="c1"># 四边形</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_quad</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>  <span class="c1"># Bézier 曲线</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_bezier</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;未处理的绘图命令&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
    <span class="c1"># ------------------------------------------------------</span>
    <span class="c1"># 所有项已绘制，应用 path 的通用属性</span>
    <span class="c1"># ------------------------------------------------------</span>
    <span class="n">shape</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span>
        <span class="n">fill</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;fill&quot;</span><span class="p">],</span>  <span class="c1"># 填充颜色</span>
        <span class="n">color</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>  <span class="c1"># 线条颜色</span>
        <span class="n">dashes</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;dashes&quot;</span><span class="p">],</span>  <span class="c1"># 线条虚线模式</span>
        <span class="n">even_odd</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;even_odd&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>  <span class="c1"># 处理重叠部分的颜色控制</span>
        <span class="n">closePath</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;closePath&quot;</span><span class="p">],</span>  <span class="c1"># 是否连接首尾点</span>
        <span class="n">lineJoin</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;lineJoin&quot;</span><span class="p">],</span>  <span class="c1"># 线条连接方式</span>
        <span class="n">lineCap</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;lineCap&quot;</span><span class="p">]),</span>  <span class="c1"># 线条端点样式</span>
        <span class="n">width</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>  <span class="c1"># 线宽</span>
        <span class="n">stroke_opacity</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stroke_opacity&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># 线条透明度</span>
        <span class="n">fill_opacity</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fill_opacity&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># 填充透明度</span>
        <span class="p">)</span>
<span class="c1"># 所有 paths 处理完成，提交形状至页面</span>
<span class="n">shape</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">outpdf</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;drawings-page-0.pdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>可以看出，该方法与 <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> 类的兼容性极高。唯一的例外是：由于技术原因，<code class="xref any docutils literal notranslate"><span class="pre">lineCap</span></code> 在 path 字典中是一个包含 3 个数值的元组，而在 <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> 类（以及 PDF 规范）中，它是一个整数。因此，我们在此取该元组的最大值。</p>
<p>以下是上述脚本处理的示例页面的输入和输出对比：</p>
<a class="reference internal image-reference" href="_images/img-getdrawings.png"><img alt="_images/img-getdrawings.png" src="_images/img-getdrawings.png" style="width: 804.5px; height: 495.5px;" /></a>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>目前的绘图重构方式并不完美，以下情况不会被正确还原：</p>
<ul class="simple">
<li><p>页面定义可能较为复杂，其中可能包含隐藏某些区域的指令，使其不可见。而 <a class="reference internal" href="page.html#Page.get_drawings" title="Page.get_drawings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.get_drawings()</span></code></a> 不考虑这些指令，它始终返回所有路径。</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>你可以使用 path 列表来创建自己的对象筛选，例如提取页面上的所有线条或矩形，并根据颜色、位置等标准进行筛选。</p>
</div>
</div>
<input class="tab-input" id="tab-set--1-input--2" name="tab-set--1" type="radio"><label class="tab-label" for="tab-set--1-input--2">英文</label><div class="tab-content docutils container">
<ul class="simple">
<li><p>New in v1.18.0</p></li>
</ul>
<p>Drawing commands (<strong>vector graphics</strong>) issued by a page can be extracted as a list of dictionaries. Interestingly, this is possible for <a class="reference internal" href="how-to-open-a-file.html#supported-file-types"><span class="std std-ref">all supported document types</span></a> – not just PDF: so you can use it for XPS, EPUB and others as well.</p>
<p>Page method, <a class="reference internal" href="page.html#Page.get_drawings" title="Page.get_drawings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.get_drawings()</span></code></a> accesses draw commands and converts them into a list of Python dictionaries. Each dictionary – called a “path” – represents a separate drawing – it may be simple like a single line, or a complex combination of lines and curves representing one of the shapes of the previous section.</p>
<p>The <em>path</em> dictionary has been designed such that it can easily be used by the <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> class and its methods. Here is an example for a page with one path, that draws a red-bordered yellow circle inside rectangle <code class="xref any docutils literal notranslate"><span class="pre">Rect(100,</span> <span class="pre">100,</span> <span class="pre">200,</span> <span class="pre">200)</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pprint</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">get_drawings</span><span class="p">())</span>
<span class="go">[{&#39;closePath&#39;: True,</span>
<span class="go">&#39;color&#39;: [1.0, 0.0, 0.0],</span>
<span class="go">&#39;dashes&#39;: &#39;[] 0&#39;,</span>
<span class="go">&#39;even_odd&#39;: False,</span>
<span class="go">&#39;fill&#39;: [1.0, 1.0, 0.0],</span>
<span class="go">&#39;items&#39;: [(&#39;c&#39;,</span>
<span class="go">            Point(100.0, 150.0),</span>
<span class="go">            Point(100.0, 177.614013671875),</span>
<span class="go">            Point(122.38600158691406, 200.0),</span>
<span class="go">            Point(150.0, 200.0)),</span>
<span class="go">            (&#39;c&#39;,</span>
<span class="go">            Point(150.0, 200.0),</span>
<span class="go">            Point(177.61399841308594, 200.0),</span>
<span class="go">            Point(200.0, 177.614013671875),</span>
<span class="go">            Point(200.0, 150.0)),</span>
<span class="go">            (&#39;c&#39;,</span>
<span class="go">            Point(200.0, 150.0),</span>
<span class="go">            Point(200.0, 122.385986328125),</span>
<span class="go">            Point(177.61399841308594, 100.0),</span>
<span class="go">            Point(150.0, 100.0)),</span>
<span class="go">            (&#39;c&#39;,</span>
<span class="go">            Point(150.0, 100.0),</span>
<span class="go">            Point(122.38600158691406, 100.0),</span>
<span class="go">            Point(100.0, 122.385986328125),</span>
<span class="go">            Point(100.0, 150.0))],</span>
<span class="go">&#39;lineCap&#39;: (0, 0, 0),</span>
<span class="go">&#39;lineJoin&#39;: 0,</span>
<span class="go">&#39;opacity&#39;: 1.0,</span>
<span class="go">&#39;rect&#39;: Rect(100.0, 100.0, 200.0, 200.0),</span>
<span class="go">&#39;width&#39;: 1.0}]</span>
<span class="gp">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>You need (at least) 4 Bézier curves (of 3rd order) to draw a circle with acceptable precision. See this <a class="reference external" href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">Wikipedia article</a> for some background.</p>
</div>
<p>The following is a code snippet which extracts the drawings of a page and re-draws them on a new page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pymupdf</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s2">&quot;some.file&quot;</span><span class="p">)</span>
<span class="n">page</span> <span class="o">=</span> <span class="n">doc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">paths</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_drawings</span><span class="p">()</span>  <span class="c1"># extract existing drawings</span>
<span class="c1"># this is a list of &quot;paths&quot;, which can directly be drawn again using Shape</span>
<span class="c1"># -------------------------------------------------------------------------</span>
<span class="c1">#</span>
<span class="c1"># define some output page with the same dimensions</span>
<span class="n">outpdf</span> <span class="o">=</span> <span class="n">pymupdf</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>
<span class="n">outpage</span> <span class="o">=</span> <span class="n">outpdf</span><span class="o">.</span><span class="n">new_page</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">page</span><span class="o">.</span><span class="n">rect</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">outpage</span><span class="o">.</span><span class="n">new_shape</span><span class="p">()</span>  <span class="c1"># make a drawing canvas for the output page</span>
<span class="c1"># --------------------------------------</span>
<span class="c1"># loop through the paths and draw them</span>
<span class="c1"># --------------------------------------</span>
<span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
    <span class="c1"># ------------------------------------</span>
    <span class="c1"># draw each entry of the &#39;items&#39; list</span>
    <span class="c1"># ------------------------------------</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">path</span><span class="p">[</span><span class="s2">&quot;items&quot;</span><span class="p">]:</span>  <span class="c1"># these are the draw commands</span>
        <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span>  <span class="c1"># line</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_line</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;re&quot;</span><span class="p">:</span>  <span class="c1"># rectangle</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_rect</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;qu&quot;</span><span class="p">:</span>  <span class="c1"># quad</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_quad</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>  <span class="c1"># curve</span>
            <span class="n">shape</span><span class="o">.</span><span class="n">draw_bezier</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;unhandled drawing&quot;</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
    <span class="c1"># ------------------------------------------------------</span>
    <span class="c1"># all items are drawn, now apply the common properties</span>
    <span class="c1"># to finish the path</span>
    <span class="c1"># ------------------------------------------------------</span>
    <span class="n">shape</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span>
        <span class="n">fill</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;fill&quot;</span><span class="p">],</span>  <span class="c1"># fill color</span>
        <span class="n">color</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">],</span>  <span class="c1"># line color</span>
        <span class="n">dashes</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;dashes&quot;</span><span class="p">],</span>  <span class="c1"># line dashing</span>
        <span class="n">even_odd</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;even_odd&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">),</span>  <span class="c1"># control color of overlaps</span>
        <span class="n">closePath</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;closePath&quot;</span><span class="p">],</span>  <span class="c1"># whether to connect last and first point</span>
        <span class="n">lineJoin</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;lineJoin&quot;</span><span class="p">],</span>  <span class="c1"># how line joins should look like</span>
        <span class="n">lineCap</span><span class="o">=</span><span class="nb">max</span><span class="p">(</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;lineCap&quot;</span><span class="p">]),</span>  <span class="c1"># how line ends should look like</span>
        <span class="n">width</span><span class="o">=</span><span class="n">path</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">],</span>  <span class="c1"># line width</span>
        <span class="n">stroke_opacity</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;stroke_opacity&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># same value for both</span>
        <span class="n">fill_opacity</span><span class="o">=</span><span class="n">path</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;fill_opacity&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># opacity parameters</span>
        <span class="p">)</span>
<span class="c1"># all paths processed - commit the shape to its page</span>
<span class="n">shape</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
<span class="n">outpdf</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="s2">&quot;drawings-page-0.pdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As can be seen, there is a high congruence level with the <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> class. With one exception: For technical reasons <code class="xref any docutils literal notranslate"><span class="pre">lineCap</span></code> is a tuple of 3 numbers here, whereas it is an integer in <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> (and in PDF). So we simply take the maximum value of that tuple.</p>
<p>Here is a comparison between input and output of an example page, created by the previous script:</p>
<img alt="_images/img-getdrawings.png" src="_images/img-getdrawings.png" />
<dl class="field-list simple">
<dt class="field-odd">scale<span class="colon">:</span></dt>
<dd class="field-odd"><p>50</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>The reconstruction of graphics, like shown here, is not perfect. The following aspects will not be reproduced as of this version:</p>
<ul class="simple">
<li><p>Page definitions can be complex and include instructions for not showing / hiding certain areas to keep them invisible. Things like this are ignored by <a class="reference internal" href="page.html#Page.get_drawings" title="Page.get_drawings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.get_drawings()</span></code></a> - it will always return all paths.</p></li>
</ul>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>You can use the path list to make your own lists of e.g. all lines or all rectangles on the page and subselect them by criteria, like color or position on the page etc.</p>
</div>
</div>
</div>
</section>
<section id="recipesdrawingandgraphics-delete-drawings">
<span id="id6"></span><h2>如何删除绘图<a class="headerlink" href="#recipesdrawingandgraphics-delete-drawings" title="此标题的永久链接">#</a></h2>
<p>How to Delete Drawings</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--2-input--1" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--1">中文</label><div class="tab-content docutils container">
<p>要删除绘图/矢量图形，需要使用 <a class="reference internal" href="the-basics.html#the-basics-redacting"><span class="std std-ref">遮盖注释（Redaction Annotation）</span></a>，并将其边界框设为绘图的区域。然后，<strong>添加并应用</strong> 遮盖注释以删除该绘图。</p>
<p>以下代码示例展示了如何删除页面上的第一个绘图对象:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">paths</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_drawings</span><span class="p">()</span>
<span class="n">rect</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;rect&quot;</span><span class="p">]</span>  <span class="c1"># 获取第一个绘图对象的边界矩形</span>
<span class="n">page</span><span class="o">.</span><span class="n">add_redact_annot</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
<span class="n">page</span><span class="o">.</span><span class="n">apply_redactions</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 可设置选项，控制对图像、绘图和文本的删除方式</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>参见 <a class="reference internal" href="page.html#Page.apply_redactions" title="Page.apply_redactions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.apply_redactions()</span></code></a> 以了解可用参数选项。您可以针对绑定在注释区域内的图像、绘图和文本对象分别应用删除选项。</p>
</div>
</div>
<input class="tab-input" id="tab-set--2-input--2" name="tab-set--2" type="radio"><label class="tab-label" for="tab-set--2-input--2">英文</label><div class="tab-content docutils container">
<p>To delete drawings/vector graphics we must use a <a class="reference internal" href="the-basics.html#the-basics-redacting"><span class="std std-ref">Redaction Annotation</span></a> with the bounding box of the drawing and then <strong>add and apply</strong> a redaction to it to delete it.</p>
<p>The following code shows an example of deleting the first drawing found on the page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">paths</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_drawings</span><span class="p">()</span>
<span class="n">rect</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;rect&quot;</span><span class="p">]</span>  <span class="c1"># rectangle of the 1st drawing</span>
<span class="n">page</span><span class="o">.</span><span class="n">add_redact_annot</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
<span class="n">page</span><span class="o">.</span><span class="n">apply_redactions</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># potentially set options for any of images, drawings, text</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">备注</p>
<p>See <a class="reference internal" href="page.html#Page.apply_redactions" title="Page.apply_redactions"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Page.apply_redactions()</span></code></a> for the parameter options which can be sent - you are able to apply deletion options to image, drawing and text objects which are bound by the annotation area.</p>
</div>
</div>
</div>
</section>
<section id="id7">
<h2>如何绘制图形<a class="headerlink" href="#id7" title="此标题的永久链接">#</a></h2>
<p>How to Draw Graphics</p>
<div class="tab-set docutils container">
<input checked="True" class="tab-input" id="tab-set--3-input--1" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--1">中文</label><div class="tab-content docutils container">
<p>绘制图形的操作非常简单，只需调用相应的 <a class="reference internal" href="page.html#Page.draw_line" title="Page.draw_line"><code class="xref py py-meth docutils literal notranslate"><span class="pre">绘图方法</span></code></a> 即可。您可以直接在页面上绘制图形，也可以在形状（Shape）对象内绘制。</p>
<p>例如，绘制一个圆:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># 使用 Page 方法在页面上绘制一个圆</span>
<span class="n">page</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">((</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">),</span> <span class="n">radius</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># 使用 Shape 对象在页面上绘制一个圆</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">new_shape</span><span class="p">()</span>
<span class="n">shape</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">((</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">),</span> <span class="n">radius</span><span class="p">)</span>
<span class="n">shape</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">shape</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> 对象可用于组合多个绘图操作，并通过 <a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Shape.finish()</span></code></a> 方法为它们指定统一的属性。</p>
</div>
<input class="tab-input" id="tab-set--3-input--2" name="tab-set--3" type="radio"><label class="tab-label" for="tab-set--3-input--2">英文</label><div class="tab-content docutils container">
<p>Drawing graphics is as simple as calling the type of <a class="reference internal" href="page.html#Page.draw_line" title="Page.draw_line"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Drawing</span> <span class="pre">Method</span></code></a> you may want. You can draw graphics directly on pages or within shape objects.</p>
<p>For example, to draw a circle:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Draw a circle on the page using the Page method</span>
<span class="n">page</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">((</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">),</span> <span class="n">radius</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Draw a circle on the page using a Shape object</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">new_shape</span><span class="p">()</span>
<span class="n">shape</span><span class="o">.</span><span class="n">draw_circle</span><span class="p">((</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">),</span> <span class="n">radius</span><span class="p">)</span>
<span class="n">shape</span><span class="o">.</span><span class="n">finish</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">width</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">shape</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="n">overlay</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="shape.html#shape"><span class="std std-ref">Shape</span></a> object can be used to combine multiple drawings that should receive common properties as specified by <a class="reference internal" href="shape.html#Shape.finish" title="Shape.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Shape.finish()</span></code></a>.</p>
</div>
</div>
<div class="feedbackLink"><a id="feedbackLinkBottom" target=_blank>您对此页面有任何反馈吗？</b></a></div><hr class="docutils" />
<script>

   var url_string = window.location.href;
   var a = document.getElementById('feedbackLinkBottom');
   a.setAttribute("href", "https://artifex.com/contributor/feedback.php?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link&url="+url_string);

</script>

<p style="color:#999" id="footerDisclaimer">本软件按原样提供，不作任何明示或暗示担保。本软件根据许可分发，除非根据该许可条款明确授权，否则不得复制、修改或分发。请参阅 <a href="https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link">artifex.com</a> 上的许可信息，或联系 Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129, United States 了解更多信息。</p>



<script>

   let docLanguage = document.getElementsByTagName('html')[0].getAttribute('lang');

   function getHeaderAndFooterTranslation(str) {
       if (docLanguage == "ja") {
           if (str == "Do you have any feedback on this page?") {
               return "このページに関するご意見はありますか？";
           } else if (str == "Find <b>#pymupdf</b> on <b>Discord</b>") {
               return "<b>Discord</b>の <b>#pymupdf</b> を見つける";
           } else if (str == "This software is provided AS-IS with no warranty, either express or implied. This software is distributed under license and may not be copied, modified or distributed except as expressly authorized under the terms of that license. Refer to licensing information at <a href='https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link'>artifex.com</a> or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129, United States for further information.") {

               return "このソフトウェアは無保証で提供されており、明示または黙示を問わず、いかなる保証もありません。このソフトウェアはライセンスの下で配布され、ライセンスの条件に明示的に許可されている場合を除き、コピー、変更、または配布してはなりません。ライセンシング情報については、<a href='https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link'>artifex.com</a>でライセンス情報を参照するか、アメリカ合衆国カリフォルニア州サンフランシスコのArtifex Software Inc. までお問い合わせください。"

           }
       }

       return str;
   }

   document.getElementById("findOnDiscord").innerHTML = getHeaderAndFooterTranslation("Find <b>#pymupdf</b> on <b>Discord</b>");
   document.getElementById("feedbackLinkTop").innerHTML = getHeaderAndFooterTranslation("Do you have any feedback on this page?");
   document.getElementById("feedbackLinkBottom").innerHTML = getHeaderAndFooterTranslation("Do you have any feedback on this page?");
   document.getElementById("footerDisclaimer").innerHTML = getHeaderAndFooterTranslation("This software is provided AS-IS with no warranty, either express or implied. This software is distributed under license and may not be copied, modified or distributed except as expressly authorized under the terms of that license. Refer to licensing information at <a href='https://www.artifex.com?utm_source=rtd-pymupdf&utm_medium=rtd&utm_content=footer-link'>artifex.com</a> or contact Artifex Software Inc., 39 Mesa Street, Suite 108A, San Francisco CA 94129, United States for further information.");


   // more translation for admonition-title as the in-built translation isn't great, needs: 注釈 -> 注
   if (docLanguage == "ja") {
       const collection = document.getElementsByClassName("admonition-title");
       for (var i=0;i<collection.length;i++) {
           collection[i].innerHTML = "注";
       }
   }


</script><p class="footer-version">This documentation covers all versions up to 1.25.4.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="recipes-stories.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">故事</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="recipes-annotations.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">注释</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2015-2025, Artifex
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 19. 3月 2025</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">绘图和图形</a><ul>
<li><a class="reference internal" href="#recipesdrawingandgraphics-extract-drawings">如何提取绘图</a></li>
<li><a class="reference internal" href="#recipesdrawingandgraphics-delete-drawings">如何删除绘图</a></li>
<li><a class="reference internal" href="#id7">如何绘制图形</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/tabs.js"></script>
    <script src="_static/translations.js"></script>
    </body>
</html>